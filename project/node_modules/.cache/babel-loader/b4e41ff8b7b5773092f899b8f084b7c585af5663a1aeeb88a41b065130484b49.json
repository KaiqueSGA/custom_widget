{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isOldStructure = exports.convert = void 0;\nfunction convertSource(oldDisplay) {\n  return {\n    static_video: (oldDisplay === null || oldDisplay === void 0 ? void 0 : oldDisplay.static_media) || (oldDisplay === null || oldDisplay === void 0 ? void 0 : oldDisplay.static_image),\n    type: \"static\"\n  };\n}\nfunction convert(oldWidget) {\n  var oldDisplay = oldWidget.display || {};\n  var newStructure = {\n    dashboard: oldWidget.dashboard,\n    display: {\n      auto_play: true,\n      header_buttons: oldDisplay.header_buttons || [],\n      help: oldDisplay.help || \"\",\n      initially_muted: true,\n      loop: true,\n      object_fit: \"contain\",\n      occupy_whole_widget: false,\n      show_controls: true,\n      source: convertSource(oldDisplay),\n      theme: {\n        color: {\n          background: null,\n          header: null\n        }\n      }\n    },\n    id: oldWidget.id,\n    label: oldWidget.label,\n    realtime: null,\n    type: \"video\"\n  };\n  if (Array.isArray(oldWidget.data)) {\n    newStructure.data = oldWidget.data;\n  }\n  return newStructure;\n}\nexports.convert = convert;\nfunction isOldStructure(widget) {\n  var _widget$display, _widget$display2, _widget$display3, _widget$display4, _widget$display5;\n  var isOld = !!(widget !== null && widget !== void 0 && (_widget$display = widget.display) !== null && _widget$display !== void 0 && _widget$display.type_media || widget !== null && widget !== void 0 && (_widget$display2 = widget.display) !== null && _widget$display2 !== void 0 && _widget$display2.type_image || widget !== null && widget !== void 0 && (_widget$display3 = widget.display) !== null && _widget$display3 !== void 0 && _widget$display3.static_media || widget !== null && widget !== void 0 && (_widget$display4 = widget.display) !== null && _widget$display4 !== void 0 && _widget$display4.static_image || widget !== null && widget !== void 0 && (_widget$display5 = widget.display) !== null && _widget$display5 !== void 0 && _widget$display5.conditions);\n  return isOld;\n}\nexports.isOldStructure = isOldStructure;","map":{"version":3,"mappings":";;;;;;AAMA,SAASA,aAAa,CAACC,UAAe;EACpC,OAAO;IACLC,YAAY,EAAE,WAAU,aAAVD,UAAU,uBAAVA,UAAU,CAAEE,YAAY,MAAIF,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEG,YAAY;IAClEC,IAAI,EAAE;GACP;AACH;AAEA,SAAgBC,OAAO,CAACC,SAAc;EACpC,IAAMN,UAAU,GAAGM,SAAS,CAACC,OAAO,IAAI,EAAE;EAE1C,IAAMC,YAAY,GAAQ;IACxBC,SAAS,EAAEH,SAAS,CAACG,SAAS;IAC9BF,OAAO,EAAE;MACPG,SAAS,EAAE,IAAI;MACfC,cAAc,EAAEX,UAAU,CAACW,cAAc,IAAI,EAAE;MAC/CC,IAAI,EAAEZ,UAAU,CAACY,IAAI,IAAI,EAAE;MAC3BC,eAAe,EAAE,IAAI;MACrBC,IAAI,EAAE,IAAI;MACVC,UAAU,EAAE,SAAS;MACrBC,mBAAmB,EAAE,KAAK;MAC1BC,aAAa,EAAE,IAAI;MACnBC,MAAM,EAAEnB,aAAa,CAACC,UAAU,CAAC;MACjCmB,KAAK,EAAE;QACLC,KAAK,EAAE;UACLC,UAAU,EAAE,IAAI;UAChBC,MAAM,EAAE;;;KAGb;IACDC,EAAE,EAAEjB,SAAS,CAACiB,EAAE;IAChBC,KAAK,EAAElB,SAAS,CAACkB,KAAK;IACtBC,QAAQ,EAAE,IAAI;IACdrB,IAAI,EAAE;GACP;EAED,IAAIsB,KAAK,CAACC,OAAO,CAACrB,SAAS,CAACsB,IAAI,CAAC,EAAE;IACjCpB,YAAY,CAACoB,IAAI,GAAGtB,SAAS,CAACsB,IAAI;;EAGpC,OAAOpB,YAAY;AACrB;AAjCAqB;AAmCA,SAAgBC,cAAc,CAACC,MAAW;EAAA;EACxC,IAAMC,KAAK,GAAG,CAAC,EACbD,MAAM,aAANA,MAAM,kCAANA,MAAM,CAAExB,OAAO,4CAAf,gBAAiB0B,UAAU,IAC3BF,MAAM,aAANA,MAAM,mCAANA,MAAM,CAAExB,OAAO,6CAAf,iBAAiB2B,UAAU,IAC3BH,MAAM,aAANA,MAAM,mCAANA,MAAM,CAAExB,OAAO,6CAAf,iBAAiBL,YAAY,IAC7B6B,MAAM,aAANA,MAAM,mCAANA,MAAM,CAAExB,OAAO,6CAAf,iBAAiBJ,YAAY,IAC7B4B,MAAM,aAANA,MAAM,mCAANA,MAAM,CAAExB,OAAO,6CAAf,iBAAiB4B,UAAU,CAC5B;EAED,OAAOH,KAAK;AACd;AAVAH","names":["convertSource","oldDisplay","static_video","static_media","static_image","type","convert","oldWidget","display","newStructure","dashboard","auto_play","header_buttons","help","initially_muted","loop","object_fit","occupy_whole_widget","show_controls","source","theme","color","background","header","id","label","realtime","Array","isArray","data","exports","isOldStructure","widget","isOld","type_media","type_image","conditions"],"sources":["C:\\Users\\yudji\\OneDrive\\Documentos\\SGA\\WIDGETS\\mqtt_wid\\dash_mqtt\\node_modules\\@tago-io\\sdk\\src\\modules\\Migration\\video.ts"],"sourcesContent":["// ? ==================================== (c) TagoIO ====================================\n// * What is this file?\n//     Migration of old VIDEO to new VIDEO\n// ? ====================================================================================\nimport { WidgetInfo } from \"../Account/dashboards.types\";\n\nfunction convertSource(oldDisplay: any) {\n  return {\n    static_video: oldDisplay?.static_media || oldDisplay?.static_image,\n    type: \"static\",\n  };\n}\n\nexport function convert(oldWidget: any): WidgetInfo {\n  const oldDisplay = oldWidget.display || {};\n\n  const newStructure: any = {\n    dashboard: oldWidget.dashboard,\n    display: {\n      auto_play: true,\n      header_buttons: oldDisplay.header_buttons || [],\n      help: oldDisplay.help || \"\",\n      initially_muted: true,\n      loop: true,\n      object_fit: \"contain\",\n      occupy_whole_widget: false,\n      show_controls: true,\n      source: convertSource(oldDisplay),\n      theme: {\n        color: {\n          background: null,\n          header: null,\n        },\n      },\n    },\n    id: oldWidget.id,\n    label: oldWidget.label,\n    realtime: null,\n    type: \"video\",\n  };\n\n  if (Array.isArray(oldWidget.data)) {\n    newStructure.data = oldWidget.data;\n  }\n\n  return newStructure;\n}\n\nexport function isOldStructure(widget: any) {\n  const isOld = !!(\n    widget?.display?.type_media ||\n    widget?.display?.type_image ||\n    widget?.display?.static_media ||\n    widget?.display?.static_image ||\n    widget?.display?.conditions\n  );\n\n  return isOld;\n}\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}