{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst TagoIOModule_1 = __importDefault(require(\"../../common/TagoIOModule\"));\nconst dateParser_1 = __importDefault(require(\"../Utils/dateParser\"));\nclass Profile extends TagoIOModule_1.default {\n  /**\r\n   * Lists all the profiles in your account\r\n   */\n  async list() {\n    const result = await this.doRequest({\n      path: \"/profile\",\n      method: \"GET\"\n    });\n    return result;\n  }\n  /**\r\n   * Get Profile info\r\n   * @param profileID Profile identification\r\n   */\n  async info(profileID) {\n    const result = await this.doRequest({\n      path: `/profile/${profileID}`,\n      method: \"GET\"\n    });\n    if (result.info) result.info = (0, dateParser_1.default)(result.info, [\"created_at\", \"updated_at\"]);\n    return result;\n  }\n  /**\r\n   * Gets profile summary\r\n   */\n  async summary(profileID) {\n    const result = await this.doRequest({\n      path: `/profile/${profileID}/summary`,\n      method: \"GET\"\n    });\n    return result;\n  }\n  /**\r\n   * Create a profile.\r\n   *\r\n   * If `allocate_free_resources` is passed as an option, all the free resources available\r\n   * in allocation will be allocated to the new profile.\r\n   *\r\n   * @param profileObj Profile object with data to be created\r\n   * @param options Options for the created profile.\r\n   */\n  async create(profileObj, options) {\n    const {\n      allocate_free_resources\n    } = options || {};\n    const params = {\n      ...(allocate_free_resources && {\n        allocate_free_resources\n      })\n    };\n    const result = await this.doRequest({\n      path: `/profile/`,\n      method: \"POST\",\n      body: profileObj,\n      params\n    });\n    return result;\n  }\n  /**\r\n   * Edits a profile\r\n   * @param profileObj Profile object with data to be changed\r\n   */\n  async edit(profileID, profileObj) {\n    const result = await this.doRequest({\n      path: `/profile/${profileID}`,\n      method: \"PUT\",\n      body: profileObj\n    });\n    return result;\n  }\n  /**\r\n   * Delete profile\r\n   * @param profileID Profile identification\r\n   */\n  async delete(profileID) {\n    const result = await this.doRequest({\n      path: `/profile/${profileID}`,\n      method: \"DELETE\"\n    });\n    return result;\n  }\n  /**\r\n   * List all the usage statistics of a profile.\r\n   *\r\n   * Usage statistics are cumulative: if a service was not used in a time period,\r\n   * the statistics for that time period will not be in the object.\r\n   *\r\n   * @param profileID Profile identification\r\n   * @param dateObj Object with date and their timezone\r\n   *\r\n   * @returns Array of cumulative usage statistics.\r\n   *\r\n   * @example\r\n   *\r\n   * ```json\r\n   * [\r\n   *   { \"time\": \"2022-01-01T00:00:00.000Z\", \"input\": 5 },\r\n   *   { \"time\": \"2022-01-02T00:00:00.000Z\", \"input\": 5, \"output\": 10 },\r\n   *   { \"time\": \"2022-01-03T00:00:00.000Z\", \"input\": 10, \"output\": 15 },\r\n   * ]\r\n   * ```\r\n   */\n  async usageStatisticList(profileID, dateObj) {\n    let result = await this.doRequest({\n      path: `/profile/${profileID}/statistics`,\n      method: \"GET\",\n      params: {\n        ...dateObj\n      }\n    });\n    result = result.map(data => (0, dateParser_1.default)(data, [\"time\"]));\n    return result;\n  }\n  /**\r\n   * Create a query for auditlog\r\n   * @param profileID Profile identification\r\n   * @param filterObj auditlog filter object\r\n   */\n  async auditLog(profileID, filterObj) {\n    const result = await this.doRequest({\n      path: `/profile/${profileID}/auditlog`,\n      method: \"GET\",\n      params: filterObj || {}\n    });\n    result.events = result?.events.map(data => (0, dateParser_1.default)(data, [\"date\"]));\n    return result;\n  }\n  /**\r\n   * Fetches the information from an auditlog query\r\n   * @param profileID Profile identification\r\n   * @param queryId auditlog queryId from auditLogCreate\r\n   */\n  async auditLogQuery(profileID, queryId) {\n    const result = await this.doRequest({\n      path: `/profile/${profileID}/auditlog/${queryId}`,\n      method: \"GET\"\n    });\n    result.events = result?.events.map(data => (0, dateParser_1.default)(data, [\"date\"]));\n    return result;\n  }\n  /**\r\n   * Gets the information of addons for the profile\r\n   * @param profileID Profile identification\r\n   */\n  async addonList(profileID) {\n    const result = await this.doRequest({\n      path: `/profile/${profileID}/addons`,\n      method: \"GET\"\n    });\n    return result;\n  }\n  /**\r\n   * Sets the information of addons for the profile\r\n   * @param profileID Profile identification\r\n   * @param addonObj\r\n   */\n  async addonEdit(profileID, addonObj) {\n    const result = await this.doRequest({\n      path: `/profile/${profileID}/addons`,\n      method: \"POST\",\n      body: addonObj\n    });\n    return result;\n  }\n  /**\r\n   * Sets the information of services for the profile. Services are the main resources\r\n   * in your profile, for example data input, data output, etc...\r\n   * @param profileID Profile identification\r\n   * @param serviceObj\r\n   */\n  async serviceEdit(profileID, serviceObj) {\n    const result = await this.doRequest({\n      path: `/profile/${profileID}/services`,\n      method: \"POST\",\n      body: serviceObj\n    });\n    return result;\n  }\n  /**\r\n   * Transforms the current token to another profile. The current profile will\r\n   * no longer have the current token, as the current token will be acquired by the profile informed.\r\n   * After this call is done, other requests using this token will work solely for the new profile, and\r\n   * no longer for the current profile.\r\n   * @param targetProfileID Profile identification\r\n   */\n  async transferTokenToAnotherProfile(targetProfileID) {\n    const result = await this.doRequest({\n      path: `/profile/switch/${targetProfileID}`,\n      method: \"PUT\"\n    });\n    return result;\n  }\n  /**\r\n   * Retrieves a list of all tokens\r\n   * @param profileID Profile ID\r\n   * @param queryObj Search query params\r\n   */\n  async tokenList(profileID, queryObj) {\n    let result = await this.doRequest({\n      path: `/profile/${profileID}/token`,\n      method: \"GET\",\n      params: {\n        page: queryObj?.page || 1,\n        fields: queryObj?.fields || [\"name\", \"token\", \"permission\"],\n        filter: queryObj?.filter || {},\n        amount: queryObj?.amount || 20,\n        orderBy: queryObj?.orderBy ? `${queryObj.orderBy[0]},${queryObj.orderBy[1]}` : \"created_at,desc\"\n      }\n    });\n    result = result.map(data => (0, dateParser_1.default)(data, [\"last_authorization\", \"expire_time\", \"created_at\"]));\n    return result;\n  }\n  /**\r\n   * Generates and retrieves a new token\r\n   * @param profileID Profile ID\r\n   * @param tokenParams Token params for new token\r\n   */\n  async tokenCreate(profileID, tokenParams) {\n    let result = await this.doRequest({\n      path: `/profile/${profileID}/token`,\n      method: \"POST\",\n      body: tokenParams\n    });\n    result = (0, dateParser_1.default)(result, [\"expire_date\"]);\n    return result;\n  }\n  /**\r\n   * Deletes a token\r\n   * @param token Token\r\n   */\n  async tokenDelete(token) {\n    const result = await this.doRequest({\n      path: `/profile/token/${token}`,\n      method: \"DELETE\"\n    });\n    return result;\n  }\n  /**\r\n   * Remove an add-on from a profile at the end of the billing cycle.\r\n   *\r\n   * @throws If profile ID is invalid.\r\n   * @throws If profile doesn't have the add-on.\r\n   *\r\n   * @returns Success message.\r\n   */\n  async removeAddOn(profileId, addon) {\n    const result = await this.doRequest({\n      path: `/profile/${profileId}/${addon}`,\n      method: \"DELETE\"\n    });\n    return result;\n  }\n}\nexports.default = Profile;","map":{"version":3,"mappings":"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","names":["Profile","TagoIOModule_1","list","result","doRequest","path","method","info","profileID","summary","create","profileObj","options","allocate_free_resources","params","body","edit","delete","usageStatisticList","dateObj","map","data","auditLog","filterObj","events","auditLogQuery","queryId","addonList","addonEdit","addonObj","serviceEdit","serviceObj","transferTokenToAnotherProfile","targetProfileID","tokenList","queryObj","page","fields","filter","amount","orderBy","tokenCreate","tokenParams","tokenDelete","token","removeAddOn","profileId","addon","exports"],"sources":["C:\\Users\\kaique\\Documents\\SGA\\widget\\project\\node_modules\\@tago-io\\sdk\\src\\modules\\Account\\Profile.ts"],"sourcesContent":["import {\r\n  GenericID,\r\n  GenericToken,\r\n  ListTokenQuery,\r\n  TokenCreateResponse,\r\n  TokenData,\r\n  TokenDataList,\r\n} from \"../../common/common.types\";\r\nimport TagoIOModule, { GenericModuleParams } from \"../../common/TagoIOModule\";\r\nimport dateParser from \"../Utils/dateParser\";\r\nimport { BillingAddOn } from \"./billing.types\";\r\nimport type {\r\n  AddonInfo,\r\n  AuditLog,\r\n  AuditLogFilter,\r\n  ProfileInfo,\r\n  ProfileListInfo,\r\n  ProfileSummary,\r\n  StatisticsDate,\r\n  UsageStatistic,\r\n} from \"./profile.types\";\r\n\r\nclass Profile extends TagoIOModule<GenericModuleParams> {\r\n  /**\r\n   * Lists all the profiles in your account\r\n   */\r\n  public async list(): Promise<ProfileListInfo[]> {\r\n    const result = await this.doRequest<ProfileListInfo[]>({\r\n      path: \"/profile\",\r\n      method: \"GET\",\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Get Profile info\r\n   * @param profileID Profile identification\r\n   */\r\n  public async info(profileID: GenericID): Promise<ProfileInfo> {\r\n    const result = await this.doRequest<ProfileInfo>({\r\n      path: `/profile/${profileID}`,\r\n      method: \"GET\",\r\n    });\r\n\r\n    if (result.info) result.info = dateParser(result.info, [\"created_at\", \"updated_at\"]);\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Gets profile summary\r\n   */\r\n  public async summary(profileID: GenericID): Promise<ProfileSummary> {\r\n    const result = await this.doRequest<ProfileSummary>({\r\n      path: `/profile/${profileID}/summary`,\r\n      method: \"GET\",\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Create a profile.\r\n   *\r\n   * If `allocate_free_resources` is passed as an option, all the free resources available\r\n   * in allocation will be allocated to the new profile.\r\n   *\r\n   * @param profileObj Profile object with data to be created\r\n   * @param options Options for the created profile.\r\n   */\r\n  public async create(\r\n    profileObj: { name: string },\r\n    options?: { allocate_free_resources?: boolean }\r\n  ): Promise<{ id: GenericID }> {\r\n    const { allocate_free_resources } = options || {};\r\n    const params = {\r\n      ...(allocate_free_resources && { allocate_free_resources }),\r\n    };\r\n\r\n    const result = await this.doRequest<{ id: GenericID }>({\r\n      path: `/profile/`,\r\n      method: \"POST\",\r\n      body: profileObj,\r\n      params,\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Edits a profile\r\n   * @param profileObj Profile object with data to be changed\r\n   */\r\n  public async edit(profileID: GenericID, profileObj: Partial<ProfileInfo>): Promise<string> {\r\n    const result = await this.doRequest<string>({\r\n      path: `/profile/${profileID}`,\r\n      method: \"PUT\",\r\n      body: profileObj,\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Delete profile\r\n   * @param profileID Profile identification\r\n   */\r\n  public async delete(profileID: GenericID): Promise<string> {\r\n    const result = await this.doRequest<string>({\r\n      path: `/profile/${profileID}`,\r\n      method: \"DELETE\",\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * List all the usage statistics of a profile.\r\n   *\r\n   * Usage statistics are cumulative: if a service was not used in a time period,\r\n   * the statistics for that time period will not be in the object.\r\n   *\r\n   * @param profileID Profile identification\r\n   * @param dateObj Object with date and their timezone\r\n   *\r\n   * @returns Array of cumulative usage statistics.\r\n   *\r\n   * @example\r\n   *\r\n   * ```json\r\n   * [\r\n   *   { \"time\": \"2022-01-01T00:00:00.000Z\", \"input\": 5 },\r\n   *   { \"time\": \"2022-01-02T00:00:00.000Z\", \"input\": 5, \"output\": 10 },\r\n   *   { \"time\": \"2022-01-03T00:00:00.000Z\", \"input\": 10, \"output\": 15 },\r\n   * ]\r\n   * ```\r\n   */\r\n  public async usageStatisticList(profileID: GenericID, dateObj?: StatisticsDate): Promise<UsageStatistic[]> {\r\n    let result = await this.doRequest<UsageStatistic[]>({\r\n      path: `/profile/${profileID}/statistics`,\r\n      method: \"GET\",\r\n      params: {\r\n        ...dateObj,\r\n      },\r\n    });\r\n\r\n    result = result.map((data) => dateParser(data, [\"time\"]));\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Create a query for auditlog\r\n   * @param profileID Profile identification\r\n   * @param filterObj auditlog filter object\r\n   */\r\n  public async auditLog(profileID: GenericID, filterObj?: AuditLogFilter): Promise<AuditLog> {\r\n    const result = await this.doRequest<AuditLog>({\r\n      path: `/profile/${profileID}/auditlog`,\r\n      method: \"GET\",\r\n      params: filterObj || {},\r\n    });\r\n\r\n    result.events = result?.events.map((data) => dateParser(data, [\"date\"]));\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Fetches the information from an auditlog query\r\n   * @param profileID Profile identification\r\n   * @param queryId auditlog queryId from auditLogCreate\r\n   */\r\n  public async auditLogQuery(profileID: GenericID, queryId?: string): Promise<AuditLog> {\r\n    const result = await this.doRequest<AuditLog>({\r\n      path: `/profile/${profileID}/auditlog/${queryId}`,\r\n      method: \"GET\",\r\n    });\r\n\r\n    result.events = result?.events.map((data) => dateParser(data, [\"date\"]));\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Gets the information of addons for the profile\r\n   * @param profileID Profile identification\r\n   */\r\n  public async addonList(profileID: GenericID): Promise<AddonInfo> {\r\n    const result = await this.doRequest<AddonInfo>({\r\n      path: `/profile/${profileID}/addons`,\r\n      method: \"GET\",\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Sets the information of addons for the profile\r\n   * @param profileID Profile identification\r\n   * @param addonObj\r\n   */\r\n  public async addonEdit(profileID: GenericID, addonObj: Partial<AddonInfo>): Promise<string> {\r\n    const result = await this.doRequest<string>({\r\n      path: `/profile/${profileID}/addons`,\r\n      method: \"POST\",\r\n      body: addonObj,\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Sets the information of services for the profile. Services are the main resources\r\n   * in your profile, for example data input, data output, etc...\r\n   * @param profileID Profile identification\r\n   * @param serviceObj\r\n   */\r\n  public async serviceEdit(profileID: GenericID, serviceObj: object): Promise<string> {\r\n    const result = await this.doRequest<string>({\r\n      path: `/profile/${profileID}/services`,\r\n      method: \"POST\",\r\n      body: serviceObj,\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Transforms the current token to another profile. The current profile will\r\n   * no longer have the current token, as the current token will be acquired by the profile informed.\r\n   * After this call is done, other requests using this token will work solely for the new profile, and\r\n   * no longer for the current profile.\r\n   * @param targetProfileID Profile identification\r\n   */\r\n  public async transferTokenToAnotherProfile(targetProfileID: GenericID): Promise<string> {\r\n    const result = await this.doRequest<string>({\r\n      path: `/profile/switch/${targetProfileID}`,\r\n      method: \"PUT\",\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Retrieves a list of all tokens\r\n   * @param profileID Profile ID\r\n   * @param queryObj Search query params\r\n   */\r\n  public async tokenList(profileID: GenericID, queryObj?: ListTokenQuery): Promise<Partial<TokenDataList>[]> {\r\n    let result = await this.doRequest<Partial<TokenDataList>[]>({\r\n      path: `/profile/${profileID}/token`,\r\n      method: \"GET\",\r\n      params: {\r\n        page: queryObj?.page || 1,\r\n        fields: queryObj?.fields || [\"name\", \"token\", \"permission\"],\r\n        filter: queryObj?.filter || {},\r\n        amount: queryObj?.amount || 20,\r\n        orderBy: queryObj?.orderBy ? `${queryObj.orderBy[0]},${queryObj.orderBy[1]}` : \"created_at,desc\",\r\n      },\r\n    });\r\n\r\n    result = result.map((data) => dateParser(data, [\"last_authorization\", \"expire_time\", \"created_at\"]));\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Generates and retrieves a new token\r\n   * @param profileID Profile ID\r\n   * @param tokenParams Token params for new token\r\n   */\r\n  public async tokenCreate(profileID: GenericID, tokenParams: TokenData): Promise<TokenCreateResponse> {\r\n    let result = await this.doRequest<TokenCreateResponse>({\r\n      path: `/profile/${profileID}/token`,\r\n      method: \"POST\",\r\n      body: tokenParams,\r\n    });\r\n\r\n    result = dateParser(result, [\"expire_date\"]);\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Deletes a token\r\n   * @param token Token\r\n   */\r\n  public async tokenDelete(token: GenericToken): Promise<string> {\r\n    const result = await this.doRequest<string>({\r\n      path: `/profile/token/${token}`,\r\n      method: \"DELETE\",\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Remove an add-on from a profile at the end of the billing cycle.\r\n   *\r\n   * @throws If profile ID is invalid.\r\n   * @throws If profile doesn't have the add-on.\r\n   *\r\n   * @returns Success message.\r\n   */\r\n  public async removeAddOn(profileId: GenericID, addon: BillingAddOn): Promise<string> {\r\n    const result = await this.doRequest<string>({\r\n      path: `/profile/${profileId}/${addon}`,\r\n      method: \"DELETE\",\r\n    });\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}