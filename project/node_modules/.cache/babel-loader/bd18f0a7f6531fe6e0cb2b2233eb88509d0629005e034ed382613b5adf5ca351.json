{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clearCache = exports.getCache = exports.addCache = void 0;\nconst HashGenerator_1 = require(\"./HashGenerator\");\nconst cacheObj = new Map();\nfunction clearCacheTTL() {\n  for (const item of cacheObj.keys()) {\n    if (item[1] < Date.now()) {\n      cacheObj.delete(item);\n    }\n  }\n}\nfunction addCache(axiosObj, obj) {\n  let ttlMS = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5000;\n  clearCacheTTL();\n  cacheObj.set([(0, HashGenerator_1.generateRequestID)(axiosObj), Date.now() + ttlMS], obj);\n}\nexports.addCache = addCache;\nfunction getCache(axiosObj) {\n  clearCacheTTL();\n  const key = (0, HashGenerator_1.generateRequestID)(axiosObj);\n  for (const item of cacheObj.keys()) {\n    if (item[0] === key) {\n      return cacheObj.get(item);\n    }\n  }\n  return undefined;\n}\nexports.getCache = getCache;\nfunction clearCache() {\n  cacheObj.clear();\n}\nexports.clearCache = clearCache;","map":{"version":3,"mappings":";;;;;;AACA;AAKA,MAAMA,QAAQ,GAAG,IAAIC,GAAG,EAAqC;AAE7D,SAASC,aAAa;EACpB,KAAK,MAAMC,IAAI,IAAIH,QAAQ,CAACI,IAAI,EAAE,EAAE;IAClC,IAAID,IAAI,CAAC,CAAC,CAAC,GAAGE,IAAI,CAACC,GAAG,EAAE,EAAE;MACxBN,QAAQ,CAACO,MAAM,CAACJ,IAAI,CAAC;;;AAG3B;AAEA,SAASK,QAAQ,CAACC,QAA4B,EAAEC,GAAQ,EAAc;EAAA,IAAZC,KAAK,uEAAG,IAAI;EACpET,aAAa,EAAE;EACfF,QAAQ,CAACY,GAAG,CAAC,CAAC,qCAAiB,EAACH,QAAQ,CAAC,EAAEJ,IAAI,CAACC,GAAG,EAAE,GAAGK,KAAK,CAAC,EAAED,GAAG,CAAC;AACtE;AAmBSG;AAjBT,SAASC,QAAQ,CAACL,QAA4B;EAC5CP,aAAa,EAAE;EACf,MAAMa,GAAG,GAAG,qCAAiB,EAACN,QAAQ,CAAC;EAEvC,KAAK,MAAMN,IAAI,IAAIH,QAAQ,CAACI,IAAI,EAAE,EAAE;IAClC,IAAID,IAAI,CAAC,CAAC,CAAC,KAAKY,GAAG,EAAE;MACnB,OAAOf,QAAQ,CAACgB,GAAG,CAACb,IAAI,CAAC;;;EAI7B,OAAOc,SAAS;AAClB;AAMmBJ;AAJnB,SAASK,UAAU;EACjBlB,QAAQ,CAACmB,KAAK,EAAE;AAClB;AAE6BN","names":["cacheObj","Map","clearCacheTTL","item","keys","Date","now","delete","addCache","axiosObj","obj","ttlMS","set","exports","getCache","key","get","undefined","clearCache","clear"],"sources":["C:\\Users\\kaique\\Documents\\SGA\\widget\\project\\node_modules\\@tago-io\\sdk\\src\\common\\Cache.ts"],"sourcesContent":["import { AxiosRequestConfig } from \"axios\";\r\nimport { generateRequestID } from \"./HashGenerator\";\r\n\r\ntype requestID = number;\r\ntype expireTimestamp = number;\r\n\r\nconst cacheObj = new Map<[requestID, expireTimestamp], any>();\r\n\r\nfunction clearCacheTTL() {\r\n  for (const item of cacheObj.keys()) {\r\n    if (item[1] < Date.now()) {\r\n      cacheObj.delete(item);\r\n    }\r\n  }\r\n}\r\n\r\nfunction addCache(axiosObj: AxiosRequestConfig, obj: any, ttlMS = 5000) {\r\n  clearCacheTTL();\r\n  cacheObj.set([generateRequestID(axiosObj), Date.now() + ttlMS], obj);\r\n}\r\n\r\nfunction getCache(axiosObj: AxiosRequestConfig): any {\r\n  clearCacheTTL();\r\n  const key = generateRequestID(axiosObj);\r\n\r\n  for (const item of cacheObj.keys()) {\r\n    if (item[0] === key) {\r\n      return cacheObj.get(item);\r\n    }\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\nfunction clearCache() {\r\n  cacheObj.clear();\r\n}\r\n\r\nexport { addCache, getCache, clearCache };\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}