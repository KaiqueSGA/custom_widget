{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst TagoIOModule_1 = __importDefault(require(\"../../common/TagoIOModule\"));\nconst dateParser_1 = __importDefault(require(\"../Utils/dateParser\"));\nclass Network extends TagoIOModule_1.default {\n  /**\r\n   * Get information about the current network\r\n   */\n  async info() {\n    const result = await this.doRequest({\n      path: \"/info\",\n      method: \"GET\",\n      params: {\n        details: this.params.details\n      }\n    });\n    return result;\n  }\n  /**\r\n   * Get a valid token using token serie\r\n   * @param serieNumber\r\n   * @param authorization\r\n   */\n  async resolveToken(serieNumber, authorization) {\n    let path = `/integration/network/resolve/${serieNumber}`;\n    if (authorization) path = `${path}/${authorization}`;\n    const result = await this.doRequest({\n      path,\n      method: \"GET\",\n      params: {\n        details: this.params.details\n      }\n    });\n    return result;\n  }\n  /**\r\n   * Retrieves a list with all devices tokens related to\r\n   * network and connector. Network require_devices_access\r\n   * param need to be true.\r\n   * @default\r\n   * queryObj: {\r\n   *   page: 1,\r\n   *   filter: {},\r\n   *   amount: 20,\r\n   *   orderBy: \"name,asc\"\r\n   * }\r\n   * @param connectorID Connector identification\r\n   * @param queryObj Search query params\r\n   */\n  async deviceList(connectorID, queryObj) {\n    let result = await this.doRequest({\n      path: `/integration/network/${connectorID}/devices`,\n      method: \"GET\",\n      params: {\n        page: queryObj?.page || 1,\n        filter: queryObj?.filter || {},\n        amount: queryObj?.amount || 20,\n        orderBy: queryObj?.orderBy ? `${queryObj.orderBy[0]},${queryObj.orderBy[1]}` : \"name,asc\"\n      }\n    });\n    result = result.map(data => (0, dateParser_1.default)(data, [\"last_input\", \"last_output\", \"updated_at\", \"created_at\", \"inspected_at\"]));\n    return result;\n  }\n  /**\r\n   * Create or edit param for the Device in network\r\n   * @param deviceID Device ID\r\n   * @param configObj Configuration Data\r\n   * @param paramID Parameter ID\r\n   */\n  async deviceParamSet(deviceID, configObj, paramID) {\n    const result = await this.doRequest({\n      path: `/integration/network/${deviceID}/params`,\n      method: \"POST\",\n      body: paramID ? {\n        id: paramID,\n        ...configObj\n      } : configObj\n    });\n    return result;\n  }\n}\nexports.default = Network;","map":{"version":3,"mappings":";;;;;;;;;;AAAA;AAGA;AAGA,MAAMA,OAAQ,SAAQC,sBAAmC;EACvD;;;EAGO,MAAMC,IAAI;IACf,MAAMC,MAAM,GAAG,MAAM,IAAI,CAACC,SAAS,CAAe;MAChDC,IAAI,EAAE,OAAO;MACbC,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE;QACNC,OAAO,EAAE,IAAI,CAACD,MAAM,CAACC;;KAExB,CAAC;IAEF,OAAOL,MAAM;EACf;EAEA;;;;;EAKO,MAAMM,YAAY,CAACC,WAAmB,EAAEC,aAAsB;IACnE,IAAIN,IAAI,GAAG,gCAAgCK,WAAW,EAAE;IAExD,IAAIC,aAAa,EAAEN,IAAI,GAAG,GAAGA,IAAI,IAAIM,aAAa,EAAE;IAEpD,MAAMR,MAAM,GAAG,MAAM,IAAI,CAACC,SAAS,CAAe;MAChDC,IAAI;MACJC,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE;QACNC,OAAO,EAAE,IAAI,CAACD,MAAM,CAACC;;KAExB,CAAC;IAEF,OAAOL,MAAM;EACf;EAEA;;;;;;;;;;;;;;EAcO,MAAMS,UAAU,CACrBC,WAAsB,EACtBC,QAAiC;IAEjC,IAAIX,MAAM,GAAG,MAAM,IAAI,CAACC,SAAS,CAA+B;MAC9DC,IAAI,EAAE,wBAAwBQ,WAAW,UAAU;MACnDP,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE;QACNQ,IAAI,EAAED,QAAQ,EAAEC,IAAI,IAAI,CAAC;QACzBC,MAAM,EAAEF,QAAQ,EAAEE,MAAM,IAAI,EAAE;QAC9BC,MAAM,EAAEH,QAAQ,EAAEG,MAAM,IAAI,EAAE;QAC9BC,OAAO,EAAEJ,QAAQ,EAAEI,OAAO,GAAG,GAAGJ,QAAQ,CAACI,OAAO,CAAC,CAAC,CAAC,IAAIJ,QAAQ,CAACI,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG;;KAElF,CAAC;IAEFf,MAAM,GAAGA,MAAM,CAACgB,GAAG,CAAEC,IAAI,IACvB,wBAAU,EAACA,IAAI,EAAE,CAAC,YAAY,EAAE,aAAa,EAAE,YAAY,EAAE,YAAY,EAAE,cAAc,CAAC,CAAC,CAC5F;IAED,OAAOjB,MAAM;EACf;EAEA;;;;;;EAMO,MAAMkB,cAAc,CACzBC,QAAmB,EACnBC,SAAuC,EACvCC,OAAmB;IAEnB,MAAMrB,MAAM,GAAG,MAAM,IAAI,CAACC,SAAS,CAAS;MAC1CC,IAAI,EAAE,wBAAwBiB,QAAQ,SAAS;MAC/ChB,MAAM,EAAE,MAAM;MACdmB,IAAI,EAAED,OAAO,GACT;QACEE,EAAE,EAAEF,OAAO;QACX,GAAGD;OACJ,GACDA;KACL,CAAC;IAEF,OAAOpB,MAAM;EACf;;AAGFwB,kBAAe3B,OAAO","names":["Network","TagoIOModule_1","info","result","doRequest","path","method","params","details","resolveToken","serieNumber","authorization","deviceList","connectorID","queryObj","page","filter","amount","orderBy","map","data","deviceParamSet","deviceID","configObj","paramID","body","id","exports"],"sources":["C:\\Users\\kaique\\Documents\\SGA\\widget\\project\\node_modules\\@tago-io\\sdk\\src\\modules\\Network\\Network.ts"],"sourcesContent":["import TagoIOModule, { ConnectorModuleParams } from \"../../common/TagoIOModule\";\r\nimport { NetworkDeviceListQuery, INetworkInfo, NetworkDeviceListQueryInfo } from \"./network.types\";\r\nimport { GenericID, GenericToken } from \"../../common/common.types\";\r\nimport dateParser from \"../Utils/dateParser\";\r\nimport { ConfigurationParams } from \"../Account/devices.types\";\r\n\r\nclass Network extends TagoIOModule<ConnectorModuleParams> {\r\n  /**\r\n   * Get information about the current network\r\n   */\r\n  public async info(): Promise<INetworkInfo> {\r\n    const result = await this.doRequest<INetworkInfo>({\r\n      path: \"/info\",\r\n      method: \"GET\",\r\n      params: {\r\n        details: this.params.details,\r\n      },\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Get a valid token using token serie\r\n   * @param serieNumber\r\n   * @param authorization\r\n   */\r\n  public async resolveToken(serieNumber: string, authorization?: string): Promise<GenericToken> {\r\n    let path = `/integration/network/resolve/${serieNumber}`;\r\n\r\n    if (authorization) path = `${path}/${authorization}`;\r\n\r\n    const result = await this.doRequest<GenericToken>({\r\n      path,\r\n      method: \"GET\",\r\n      params: {\r\n        details: this.params.details,\r\n      },\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Retrieves a list with all devices tokens related to\r\n   * network and connector. Network require_devices_access\r\n   * param need to be true.\r\n   * @default\r\n   * queryObj: {\r\n   *   page: 1,\r\n   *   filter: {},\r\n   *   amount: 20,\r\n   *   orderBy: \"name,asc\"\r\n   * }\r\n   * @param connectorID Connector identification\r\n   * @param queryObj Search query params\r\n   */\r\n  public async deviceList(\r\n    connectorID: GenericID,\r\n    queryObj?: NetworkDeviceListQuery\r\n  ): Promise<NetworkDeviceListQueryInfo[]> {\r\n    let result = await this.doRequest<NetworkDeviceListQueryInfo[]>({\r\n      path: `/integration/network/${connectorID}/devices`,\r\n      method: \"GET\",\r\n      params: {\r\n        page: queryObj?.page || 1,\r\n        filter: queryObj?.filter || {},\r\n        amount: queryObj?.amount || 20,\r\n        orderBy: queryObj?.orderBy ? `${queryObj.orderBy[0]},${queryObj.orderBy[1]}` : \"name,asc\",\r\n      },\r\n    });\r\n\r\n    result = result.map((data) =>\r\n      dateParser(data, [\"last_input\", \"last_output\", \"updated_at\", \"created_at\", \"inspected_at\"])\r\n    );\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Create or edit param for the Device in network\r\n   * @param deviceID Device ID\r\n   * @param configObj Configuration Data\r\n   * @param paramID Parameter ID\r\n   */\r\n  public async deviceParamSet(\r\n    deviceID: GenericID,\r\n    configObj: Partial<ConfigurationParams>,\r\n    paramID?: GenericID\r\n  ): Promise<string> {\r\n    const result = await this.doRequest<string>({\r\n      path: `/integration/network/${deviceID}/params`,\r\n      method: \"POST\",\r\n      body: paramID\r\n        ? {\r\n            id: paramID,\r\n            ...configObj,\r\n          }\r\n        : configObj,\r\n    });\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nexport default Network;\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}