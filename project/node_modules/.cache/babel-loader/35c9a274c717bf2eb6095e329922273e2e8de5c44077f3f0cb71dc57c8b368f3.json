{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst Account_1 = __importDefault(require(\"../Account/Account\"));\n/**\n *\n * @param account Account instance\n * @param deviceID Id of device\n * @param names Array of names of the token, if null will return the first token found\n */\nasync function getTokenByName(account, deviceID, names) {\n  if (!(account instanceof Account_1.default)) {\n    throw \"Account parameter must be an instance of TagoIO Account.\";\n  }\n  const tokens = await account.devices.tokenList(deviceID);\n  if (!tokens || !tokens[0]) {\n    return null;\n  }\n  if (!names || !names.length) {\n    return tokens[0]?.token;\n  }\n  const namesArray = Array.isArray(names) ? names : [names];\n  const token = tokens.find(t => namesArray.some(n => t.name.includes(n)));\n  if (!token) {\n    throw `Can't find Token for ${deviceID} in ${namesArray.join(\", \")}`;\n  }\n  return token.token;\n}\nexports.default = getTokenByName;","map":{"version":3,"mappings":";;;;;;;;;;AAAA;AAEA;;;;;;AAMA,eAAeA,cAAc,CAACC,OAAgB,EAAEC,QAAgB,EAAEC,KAAyB;EACzF,IAAI,EAAEF,OAAO,YAAYG,iBAAO,CAAC,EAAE;IACjC,MAAM,0DAA0D;;EAGlE,MAAMC,MAAM,GAAG,MAAMJ,OAAO,CAACK,OAAO,CAACC,SAAS,CAACL,QAAQ,CAAC;EACxD,IAAI,CAACG,MAAM,IAAI,CAACA,MAAM,CAAC,CAAC,CAAC,EAAE;IACzB,OAAO,IAAI;;EAGb,IAAI,CAACF,KAAK,IAAI,CAACA,KAAK,CAACK,MAAM,EAAE;IAC3B,OAAOH,MAAM,CAAC,CAAC,CAAC,EAAEI,KAAK;;EAGzB,MAAMC,UAAU,GAAGC,KAAK,CAACC,OAAO,CAACT,KAAK,CAAC,GAAGA,KAAK,GAAG,CAACA,KAAK,CAAC;EAEzD,MAAMM,KAAK,GAAGJ,MAAM,CAACQ,IAAI,CAAEC,CAAC,IAAKJ,UAAU,CAACK,IAAI,CAAEC,CAAC,IAAKF,CAAC,CAACG,IAAI,CAACC,QAAQ,CAACF,CAAC,CAAC,CAAC,CAAC;EAE5E,IAAI,CAACP,KAAK,EAAE;IACV,MAAM,wBAAwBP,QAAQ,OAAOQ,UAAU,CAACS,IAAI,CAAC,IAAI,CAAC,EAAE;;EAGtE,OAAOV,KAAK,CAACA,KAAK;AACpB;AAEAW,kBAAepB,cAAc","names":["getTokenByName","account","deviceID","names","Account_1","tokens","devices","tokenList","length","token","namesArray","Array","isArray","find","t","some","n","name","includes","join","exports"],"sources":["C:\\Users\\yudji\\OneDrive\\Documentos\\SGA\\WIDGETS\\mqtt_wid\\dash_mqtt\\node_modules\\@tago-io\\sdk\\src\\modules\\Utils\\getTokenByName.ts"],"sourcesContent":["import Account from \"../Account/Account\";\n\n/**\n *\n * @param account Account instance\n * @param deviceID Id of device\n * @param names Array of names of the token, if null will return the first token found\n */\nasync function getTokenByName(account: Account, deviceID: string, names?: string[] | string): Promise<string> {\n  if (!(account instanceof Account)) {\n    throw \"Account parameter must be an instance of TagoIO Account.\";\n  }\n\n  const tokens = await account.devices.tokenList(deviceID);\n  if (!tokens || !tokens[0]) {\n    return null;\n  }\n\n  if (!names || !names.length) {\n    return tokens[0]?.token;\n  }\n\n  const namesArray = Array.isArray(names) ? names : [names];\n\n  const token = tokens.find((t) => namesArray.some((n) => t.name.includes(n)));\n\n  if (!token) {\n    throw `Can't find Token for ${deviceID} in ${namesArray.join(\", \")}`;\n  }\n\n  return token.token;\n}\n\nexport default getTokenByName;\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}