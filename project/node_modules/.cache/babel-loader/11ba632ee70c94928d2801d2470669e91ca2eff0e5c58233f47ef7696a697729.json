{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/Users/yudji/OneDrive/Documentos/SGA/WIDGETS/custom_widgets/project/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"C:/Users/yudji/OneDrive/Documentos/SGA/WIDGETS/custom_widgets/project/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"C:/Users/yudji/OneDrive/Documentos/SGA/WIDGETS/custom_widgets/project/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"C:/Users/yudji/OneDrive/Documentos/SGA/WIDGETS/custom_widgets/project/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _objectSpread = require(\"C:/Users/yudji/OneDrive/Documentos/SGA/WIDGETS/custom_widgets/project/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar qs_1 = __importDefault(require(\"qs\"));\nvar apiRequest_1 = __importDefault(require(\"../infrastructure/apiRequest\"));\nvar regions_1 = __importDefault(require(\"../regions\"));\n/**\n * Create a Object for Axios\n * @internal\n * @param uri URI\n * @param requestObj doRequestParams\n */\nfunction mountAxiosRequest(uri, requestObj) {\n  var axiosObj = _objectSpread({\n    url: \"\".concat(uri).concat(requestObj.path),\n    method: requestObj.method,\n    data: requestObj.body,\n    params: requestObj.params,\n    maxContentLength: requestObj.maxContentLength,\n    paramsSerializer: function paramsSerializer(p) {\n      return qs_1.default.stringify(p);\n    },\n    headers: _objectSpread({}, requestObj.headers)\n  }, requestObj.overwriteAxiosConfig);\n  return axiosObj;\n}\n/**\n * Abstract class to wrap all TagoIO SDK Modules\n * @internal\n */\nvar TagoIOModule = /*#__PURE__*/function () {\n  function TagoIOModule(params) {\n    _classCallCheck(this, TagoIOModule);\n    this.params = {};\n    this.params = params;\n    this.validateParams();\n  }\n  _createClass(TagoIOModule, [{\n    key: \"validateParams\",\n    value: function validateParams() {\n      if (!this.params) {\n        throw new Error(\"Invalid Params\");\n      }\n      if (!this.params.token) {\n        throw new Error(\"Invalid Token\");\n      }\n      // if (this.params.options && typeof this.params.options !== \"object\") {\n      //   throw new Error(\"Invalid Params\");\n      // }\n    }\n  }, {\n    key: \"doRequest\",\n    value: function () {\n      var _doRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(requestObj) {\n        var _ref;\n        var apiURI, axiosObj, result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                apiURI = (_ref = (0, regions_1.default)(this.params.region)) === null || _ref === void 0 ? void 0 : _ref.api;\n                if (apiURI) {\n                  _context.next = 3;\n                  break;\n                }\n                throw new Error(\"Invalid region\");\n              case 3:\n                axiosObj = mountAxiosRequest(apiURI, requestObj);\n                axiosObj.headers = _objectSpread({\n                  token: this.params.token\n                }, axiosObj.headers);\n                _context.next = 7;\n                return (0, apiRequest_1.default)(axiosObj, requestObj.cacheTTL);\n              case 7:\n                result = _context.sent;\n                return _context.abrupt(\"return\", result);\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function doRequest(_x) {\n        return _doRequest.apply(this, arguments);\n      }\n      return doRequest;\n    }()\n  }], [{\n    key: \"doRequestAnonymous\",\n    value: function () {\n      var _doRequestAnonymous = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(requestObj, region) {\n        var _ref2;\n        var apiURI, axiosObj, result;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                apiURI = (_ref2 = (0, regions_1.default)(region)) === null || _ref2 === void 0 ? void 0 : _ref2.api;\n                if (apiURI) {\n                  _context2.next = 3;\n                  break;\n                }\n                throw new Error(\"Invalid region\");\n              case 3:\n                axiosObj = mountAxiosRequest(apiURI, requestObj);\n                _context2.next = 6;\n                return (0, apiRequest_1.default)(axiosObj, requestObj.cacheTTL);\n              case 6:\n                result = _context2.sent;\n                return _context2.abrupt(\"return\", result);\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      function doRequestAnonymous(_x2, _x3) {\n        return _doRequestAnonymous.apply(this, arguments);\n      }\n      return doRequestAnonymous;\n    }()\n  }]);\n  return TagoIOModule;\n}();\nexports.default = TagoIOModule;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;AACA;AACA;AACA;AA6CA;;;;;;AAMA,SAASA,iBAAiB,CAACC,GAAW,EAAEC,UAA2B;EACjE,IAAMC,QAAQ;IACZC,GAAG,YAAKH,GAAG,SAAGC,UAAU,CAACG,IAAI,CAAE;IAC/BC,MAAM,EAAEJ,UAAU,CAACI,MAAM;IACzBC,IAAI,EAAEL,UAAU,CAACM,IAAI;IACrBC,MAAM,EAAEP,UAAU,CAACO,MAAM;IACzBC,gBAAgB,EAAER,UAAU,CAACQ,gBAAgB;IAC7CC,gBAAgB,EAAE,0BAACC,CAAC;MAAA,OAAKC,YAAE,CAACC,SAAS,CAACF,CAAC,CAAC;IAAA;IACxCG,OAAO,oBACFb,UAAU,CAACa,OAAO;EACtB,GACEb,UAAU,CAACc,oBAAoB,CACnC;EAED,OAAOb,QAAQ;AACjB;AAEA;;;;AAAA,IAIec,YAAY;EAGzB,sBAAYR,MAAS;IAAA;IAFX,WAAM,GAAG,EAAO;IAGxB,IAAI,CAACA,MAAM,GAAGA,MAAM;IAEpB,IAAI,CAACS,cAAc,EAAE;EACvB;EAAC;IAAA;IAAA,OAEO,0BAAc;MACpB,IAAI,CAAC,IAAI,CAACT,MAAM,EAAE;QAChB,MAAM,IAAIU,KAAK,CAAC,gBAAgB,CAAC;;MAGnC,IAAI,CAAC,IAAI,CAACV,MAAM,CAACW,KAAK,EAAE;QACtB,MAAM,IAAID,KAAK,CAAC,eAAe,CAAC;;MAGlC;MACA;MACA;IACF;EAAC;IAAA;IAAA;MAAA,4EAES,iBAAoBjB,UAA2B;QAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACjDmB,MAAM,WAAG,qBAAO,EAAC,IAAI,CAACZ,MAAM,CAACa,MAAM,CAAC,yCAA3B,KAA6BC,GAAG;gBAAA,IAC1CF,MAAM;kBAAA;kBAAA;gBAAA;gBAAA,MACH,IAAIF,KAAK,CAAC,gBAAgB,CAAC;cAAA;gBAG7BhB,QAAQ,GAAGH,iBAAiB,CAACqB,MAAM,EAAEnB,UAAU,CAAC;gBACtDC,QAAQ,CAACY,OAAO;kBACdK,KAAK,EAAE,IAAI,CAACX,MAAM,CAACW;gBAAK,GACrBjB,QAAQ,CAACY,OAAO,CACpB;gBAAC;gBAAA,OAEmB,wBAAU,EAACZ,QAAQ,EAAED,UAAU,CAACsB,QAAQ,CAAC;cAAA;gBAAxDC,MAAM;gBAAA,iCAELA,MAAqB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAC7B;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;IAAA;IAAA;MAAA,qFAES,kBAAoCvB,UAA2B,EAAEoB,MAAgB;QAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACnFD,MAAM,YAAG,qBAAO,EAACC,MAAM,CAAC,0CAAf,MAAiBC,GAAG;gBAAA,IAC9BF,MAAM;kBAAA;kBAAA;gBAAA;gBAAA,MACH,IAAIF,KAAK,CAAC,gBAAgB,CAAC;cAAA;gBAG7BhB,QAAQ,GAAGH,iBAAiB,CAACqB,MAAM,EAAEnB,UAAU,CAAC;gBAAA;gBAAA,OAEjC,wBAAU,EAACC,QAAQ,EAAED,UAAU,CAACsB,QAAQ,CAAC;cAAA;gBAAxDC,MAAM;gBAAA,kCAELA,MAAqB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAC7B;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;EAAA;AAAA;AAGHC,kBAAeT,YAAY","names":["mountAxiosRequest","uri","requestObj","axiosObj","url","path","method","data","body","params","maxContentLength","paramsSerializer","p","qs_1","stringify","headers","overwriteAxiosConfig","TagoIOModule","validateParams","Error","token","apiURI","region","api","cacheTTL","result","exports"],"sources":["C:\\Users\\yudji\\OneDrive\\Documentos\\SGA\\WIDGETS\\custom_widgets\\project\\node_modules\\@tago-io\\sdk\\src\\common\\TagoIOModule.ts"],"sourcesContent":["import { AxiosRequestConfig, Method } from \"axios\";\nimport qs from \"qs\";\nimport apiRequest from \"../infrastructure/apiRequest\";\nimport regions, { Regions } from \"../regions\";\nimport { RefType, GenericID } from \"./common.types\";\n\ninterface GenericModuleParams {\n  token?: string;\n  region?: Regions;\n  // options?: Object;\n}\n\ninterface ShareModuleParams extends GenericModuleParams {\n  type: RefType;\n}\n\ninterface TokenModuleParams extends GenericModuleParams {\n  path: string;\n  id?: GenericID;\n}\n\ninterface ConnectorModuleParams extends GenericModuleParams {\n  details?: boolean;\n}\n\ninterface AuthorizationModuleParams extends GenericModuleParams {\n  details?: boolean;\n}\n\n/**\n * Object for generate request params\n * @internal\n */\ninterface doRequestParams {\n  path: string;\n  method: Method;\n  body?: any;\n  params?: any;\n  headers?: any;\n  overwriteAxiosConfig?: AxiosRequestConfig;\n  maxContentLength?: number;\n  /**\n   * Cache for request\n   * default: false (disabled)\n   */\n  cacheTTL?: number;\n}\n\n/**\n * Create a Object for Axios\n * @internal\n * @param uri URI\n * @param requestObj doRequestParams\n */\nfunction mountAxiosRequest(uri: string, requestObj: doRequestParams): AxiosRequestConfig {\n  const axiosObj: AxiosRequestConfig = {\n    url: `${uri}${requestObj.path}`,\n    method: requestObj.method,\n    data: requestObj.body,\n    params: requestObj.params,\n    maxContentLength: requestObj.maxContentLength,\n    paramsSerializer: (p) => qs.stringify(p),\n    headers: {\n      ...requestObj.headers,\n    },\n    ...requestObj.overwriteAxiosConfig,\n  };\n\n  return axiosObj;\n}\n\n/**\n * Abstract class to wrap all TagoIO SDK Modules\n * @internal\n */\nabstract class TagoIOModule<T extends GenericModuleParams> {\n  protected params = {} as T;\n\n  constructor(params: T) {\n    this.params = params;\n\n    this.validateParams();\n  }\n\n  private validateParams() {\n    if (!this.params) {\n      throw new Error(\"Invalid Params\");\n    }\n\n    if (!this.params.token) {\n      throw new Error(\"Invalid Token\");\n    }\n\n    // if (this.params.options && typeof this.params.options !== \"object\") {\n    //   throw new Error(\"Invalid Params\");\n    // }\n  }\n\n  protected async doRequest<TR>(requestObj: doRequestParams): Promise<TR> {\n    const apiURI = regions(this.params.region)?.api;\n    if (!apiURI) {\n      throw new Error(\"Invalid region\");\n    }\n\n    const axiosObj = mountAxiosRequest(apiURI, requestObj);\n    axiosObj.headers = {\n      token: this.params.token,\n      ...axiosObj.headers,\n    };\n\n    const result = await apiRequest(axiosObj, requestObj.cacheTTL);\n\n    return result as Promise<TR>;\n  }\n\n  protected static async doRequestAnonymous<TR>(requestObj: doRequestParams, region?: Regions): Promise<TR> {\n    const apiURI = regions(region)?.api;\n    if (!apiURI) {\n      throw new Error(\"Invalid region\");\n    }\n\n    const axiosObj = mountAxiosRequest(apiURI, requestObj);\n\n    const result = await apiRequest(axiosObj, requestObj.cacheTTL);\n\n    return result as Promise<TR>;\n  }\n}\n\nexport default TagoIOModule;\nexport {\n  GenericModuleParams,\n  ShareModuleParams,\n  doRequestParams,\n  TokenModuleParams,\n  ConnectorModuleParams,\n  AuthorizationModuleParams,\n};\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}