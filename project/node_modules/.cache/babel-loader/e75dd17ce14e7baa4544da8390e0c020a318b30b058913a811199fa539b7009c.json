{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"C:/Users/kaique/Documents/SGA/widget/project/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clearCache = exports.getCache = exports.addCache = void 0;\nvar HashGenerator_1 = require(\"./HashGenerator\");\nvar cacheObj = new Map();\nfunction clearCacheTTL() {\n  var _iterator = _createForOfIteratorHelper(cacheObj.keys()),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var item = _step.value;\n      if (item[1] < Date.now()) {\n        cacheObj.delete(item);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\nfunction addCache(axiosObj, obj) {\n  var ttlMS = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5000;\n  clearCacheTTL();\n  cacheObj.set([(0, HashGenerator_1.generateRequestID)(axiosObj), Date.now() + ttlMS], obj);\n}\nexports.addCache = addCache;\nfunction getCache(axiosObj) {\n  clearCacheTTL();\n  var key = (0, HashGenerator_1.generateRequestID)(axiosObj);\n  var _iterator2 = _createForOfIteratorHelper(cacheObj.keys()),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var item = _step2.value;\n      if (item[0] === key) {\n        return cacheObj.get(item);\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  return undefined;\n}\nexports.getCache = getCache;\nfunction clearCache() {\n  cacheObj.clear();\n}\nexports.clearCache = clearCache;","map":{"version":3,"mappings":";;;;;;;AACA;AAKA,IAAMA,QAAQ,GAAG,IAAIC,GAAG,EAAqC;AAE7D,SAASC,aAAa;EAAA,2CACDF,QAAQ,CAACG,IAAI,EAAE;IAAA;EAAA;IAAlC,oDAAoC;MAAA,IAAzBC,IAAI;MACb,IAAIA,IAAI,CAAC,CAAC,CAAC,GAAGC,IAAI,CAACC,GAAG,EAAE,EAAE;QACxBN,QAAQ,CAACO,MAAM,CAACH,IAAI,CAAC;;;EAExB;IAAA;EAAA;IAAA;EAAA;AACH;AAEA,SAASI,QAAQ,CAACC,QAA4B,EAAEC,GAAQ,EAAc;EAAA,IAAZC,KAAK,uEAAG,IAAI;EACpET,aAAa,EAAE;EACfF,QAAQ,CAACY,GAAG,CAAC,CAAC,qCAAiB,EAACH,QAAQ,CAAC,EAAEJ,IAAI,CAACC,GAAG,EAAE,GAAGK,KAAK,CAAC,EAAED,GAAG,CAAC;AACtE;AAmBSG;AAjBT,SAASC,QAAQ,CAACL,QAA4B;EAC5CP,aAAa,EAAE;EACf,IAAMa,GAAG,GAAG,qCAAiB,EAACN,QAAQ,CAAC;EAAC,4CAErBT,QAAQ,CAACG,IAAI,EAAE;IAAA;EAAA;IAAlC,uDAAoC;MAAA,IAAzBC,IAAI;MACb,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAKW,GAAG,EAAE;QACnB,OAAOf,QAAQ,CAACgB,GAAG,CAACZ,IAAI,CAAC;;;EAE5B;IAAA;EAAA;IAAA;EAAA;EAED,OAAOa,SAAS;AAClB;AAMmBJ;AAJnB,SAASK,UAAU;EACjBlB,QAAQ,CAACmB,KAAK,EAAE;AAClB;AAE6BN","names":["cacheObj","Map","clearCacheTTL","keys","item","Date","now","delete","addCache","axiosObj","obj","ttlMS","set","exports","getCache","key","get","undefined","clearCache","clear"],"sources":["C:\\Users\\kaique\\Documents\\SGA\\widget\\project\\node_modules\\@tago-io\\sdk\\src\\common\\Cache.ts"],"sourcesContent":["import { AxiosRequestConfig } from \"axios\";\r\nimport { generateRequestID } from \"./HashGenerator\";\r\n\r\ntype requestID = number;\r\ntype expireTimestamp = number;\r\n\r\nconst cacheObj = new Map<[requestID, expireTimestamp], any>();\r\n\r\nfunction clearCacheTTL() {\r\n  for (const item of cacheObj.keys()) {\r\n    if (item[1] < Date.now()) {\r\n      cacheObj.delete(item);\r\n    }\r\n  }\r\n}\r\n\r\nfunction addCache(axiosObj: AxiosRequestConfig, obj: any, ttlMS = 5000) {\r\n  clearCacheTTL();\r\n  cacheObj.set([generateRequestID(axiosObj), Date.now() + ttlMS], obj);\r\n}\r\n\r\nfunction getCache(axiosObj: AxiosRequestConfig): any {\r\n  clearCacheTTL();\r\n  const key = generateRequestID(axiosObj);\r\n\r\n  for (const item of cacheObj.keys()) {\r\n    if (item[0] === key) {\r\n      return cacheObj.get(item);\r\n    }\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\nfunction clearCache() {\r\n  cacheObj.clear();\r\n}\r\n\r\nexport { addCache, getCache, clearCache };\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}