{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isOldStructure = exports.convert = void 0;\nconst common_1 = require(\"./common\");\nvar EInputControlFieldType;\n(function (EInputControlFieldType) {\n  EInputControlFieldType[\"Switch\"] = \"switch\";\n  EInputControlFieldType[\"Text\"] = \"text\";\n})(EInputControlFieldType || (EInputControlFieldType = {}));\nfunction convert(oldWidget) {\n  const oldDisplay = oldWidget.display || {};\n  const newStructure = {\n    dashboard: oldWidget.dashboard,\n    display: {\n      header_buttons: oldDisplay.header_buttons || [],\n      help: oldDisplay.help || \"\",\n      sections: [],\n      theme: {\n        color: {\n          background: null,\n          field: null,\n          footer: null\n        }\n      }\n    },\n    id: oldWidget.id,\n    label: oldWidget.label,\n    realtime: null,\n    type: \"control\"\n  };\n  const section = {\n    description: \"\",\n    fields: [],\n    id: (0, common_1.generateWidgetItemId)(),\n    show_border: false,\n    show_caption: false,\n    title: \"\"\n  };\n  for (const oldField of oldDisplay?.controls || []) {\n    const data = {\n      ...(oldField?.bucket ? {\n        bucket: oldField?.bucket\n      } : {}),\n      ...(oldField?.origin ? {\n        origin: oldField?.origin\n      } : {}),\n      ...(oldField?.variable ? {\n        variable: oldField?.variable\n      } : {})\n    };\n    section.fields.push({\n      data,\n      icon: null,\n      id: (0, common_1.generateWidgetItemId)(),\n      label: oldField?.name,\n      label_selected: oldField?.label_yes || \"\",\n      label_type: \"text\",\n      label_unselected: oldField?.label_no || \"\",\n      send_data: true,\n      show_new_line: oldField?.new_line !== undefined ? oldField?.new_line : true,\n      type: oldField?.type === \"switch\" ? EInputControlFieldType.Switch : EInputControlFieldType.Text\n    });\n  }\n  newStructure.display.sections.push(section);\n  if (Array.isArray(oldWidget.data)) {\n    newStructure.data = oldWidget.data;\n  }\n  return newStructure;\n}\nexports.convert = convert;\nfunction isOldStructure(widget) {\n  const isOld = !!(widget?.display?.watermark !== undefined || widget?.display?.input_type);\n  return isOld;\n}\nexports.isOldStructure = isOldStructure;","map":{"version":3,"mappings":";;;;;;AAKA;AAEA,IAAKA,sBAGJ;AAHD,WAAKA,sBAAsB;EACzBA,2CAAmB;EACnBA,uCAAe;AACjB,CAAC,EAHIA,sBAAsB,KAAtBA,sBAAsB;AAK3B,SAAgBC,OAAO,CAACC,SAAc;EACpC,MAAMC,UAAU,GAAGD,SAAS,CAACE,OAAO,IAAI,EAAE;EAE1C,MAAMC,YAAY,GAAQ;IACxBC,SAAS,EAAEJ,SAAS,CAACI,SAAS;IAC9BF,OAAO,EAAE;MACPG,cAAc,EAAEJ,UAAU,CAACI,cAAc,IAAI,EAAE;MAC/CC,IAAI,EAAEL,UAAU,CAACK,IAAI,IAAI,EAAE;MAC3BC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE;QACLC,KAAK,EAAE;UACLC,UAAU,EAAE,IAAI;UAChBC,KAAK,EAAE,IAAI;UACXC,MAAM,EAAE;;;KAGb;IACDC,EAAE,EAAEb,SAAS,CAACa,EAAE;IAChBC,KAAK,EAAEd,SAAS,CAACc,KAAK;IACtBC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAE;GACP;EAED,MAAMC,OAAO,GAAQ;IACnBC,WAAW,EAAE,EAAE;IACfC,MAAM,EAAE,EAAE;IACVN,EAAE,EAAE,iCAAoB,GAAE;IAC1BO,WAAW,EAAE,KAAK;IAClBC,YAAY,EAAE,KAAK;IACnBC,KAAK,EAAE;GACR;EAED,KAAK,MAAMC,QAAQ,IAAItB,UAAU,EAAEuB,QAAQ,IAAI,EAAE,EAAE;IACjD,MAAMC,IAAI,GAAG;MACX,IAAIF,QAAQ,EAAEG,MAAM,GAAG;QAAEA,MAAM,EAAEH,QAAQ,EAAEG;MAAM,CAAE,GAAG,EAAE,CAAC;MACzD,IAAIH,QAAQ,EAAEI,MAAM,GAAG;QAAEA,MAAM,EAAEJ,QAAQ,EAAEI;MAAM,CAAE,GAAG,EAAE,CAAC;MACzD,IAAIJ,QAAQ,EAAEK,QAAQ,GAAG;QAAEA,QAAQ,EAAEL,QAAQ,EAAEK;MAAQ,CAAE,GAAG,EAAE;KAC/D;IAEDX,OAAO,CAACE,MAAM,CAACU,IAAI,CAAC;MAClBJ,IAAI;MACJK,IAAI,EAAE,IAAI;MACVjB,EAAE,EAAE,iCAAoB,GAAE;MAC1BC,KAAK,EAAES,QAAQ,EAAEQ,IAAI;MACrBC,cAAc,EAAET,QAAQ,EAAEU,SAAS,IAAI,EAAE;MACzCC,UAAU,EAAE,MAAM;MAClBC,gBAAgB,EAAEZ,QAAQ,EAAEa,QAAQ,IAAI,EAAE;MAC1CC,SAAS,EAAE,IAAI;MACfC,aAAa,EAAEf,QAAQ,EAAEgB,QAAQ,KAAKC,SAAS,GAAGjB,QAAQ,EAAEgB,QAAQ,GAAG,IAAI;MAC3EvB,IAAI,EAAEO,QAAQ,EAAEP,IAAI,KAAK,QAAQ,GAAGlB,sBAAsB,CAAC2C,MAAM,GAAG3C,sBAAsB,CAAC4C;KAC5F,CAAC;;EAGJvC,YAAY,CAACD,OAAO,CAACK,QAAQ,CAACsB,IAAI,CAACZ,OAAO,CAAC;EAC3C,IAAI0B,KAAK,CAACC,OAAO,CAAC5C,SAAS,CAACyB,IAAI,CAAC,EAAE;IACjCtB,YAAY,CAACsB,IAAI,GAAGzB,SAAS,CAACyB,IAAI;;EAGpC,OAAOtB,YAAY;AACrB;AA3DA0C;AA6DA,SAAgBC,cAAc,CAACC,MAAW;EACxC,MAAMC,KAAK,GAAG,CAAC,EAAED,MAAM,EAAE7C,OAAO,EAAE+C,SAAS,KAAKT,SAAS,IAAIO,MAAM,EAAE7C,OAAO,EAAEgD,UAAU,CAAC;EAEzF,OAAOF,KAAK;AACd;AAJAH","names":["EInputControlFieldType","convert","oldWidget","oldDisplay","display","newStructure","dashboard","header_buttons","help","sections","theme","color","background","field","footer","id","label","realtime","type","section","description","fields","show_border","show_caption","title","oldField","controls","data","bucket","origin","variable","push","icon","name","label_selected","label_yes","label_type","label_unselected","label_no","send_data","show_new_line","new_line","undefined","Switch","Text","Array","isArray","exports","isOldStructure","widget","isOld","watermark","input_type"],"sources":["C:\\Users\\yudji\\OneDrive\\Documentos\\SGA\\WIDGETS\\custom_widgets\\project\\node_modules\\@tago-io\\sdk\\src\\modules\\Migration\\inputcontrol.ts"],"sourcesContent":["// ? ==================================== (c) TagoIO ====================================\n// * What is this file?\n//     Migration of old INPUT CONTROL to new INPUT CONTROL\n// ? ====================================================================================\nimport { WidgetInfo } from \"../Account/dashboards.types\";\nimport { generateWidgetItemId } from \"./common\";\n\nenum EInputControlFieldType {\n  \"Switch\" = \"switch\",\n  \"Text\" = \"text\",\n}\n\nexport function convert(oldWidget: any): WidgetInfo {\n  const oldDisplay = oldWidget.display || {};\n\n  const newStructure: any = {\n    dashboard: oldWidget.dashboard,\n    display: {\n      header_buttons: oldDisplay.header_buttons || [],\n      help: oldDisplay.help || \"\",\n      sections: [],\n      theme: {\n        color: {\n          background: null,\n          field: null,\n          footer: null,\n        },\n      },\n    },\n    id: oldWidget.id,\n    label: oldWidget.label,\n    realtime: null,\n    type: \"control\",\n  };\n\n  const section: any = {\n    description: \"\",\n    fields: [],\n    id: generateWidgetItemId(),\n    show_border: false,\n    show_caption: false,\n    title: \"\",\n  };\n\n  for (const oldField of oldDisplay?.controls || []) {\n    const data = {\n      ...(oldField?.bucket ? { bucket: oldField?.bucket } : {}),\n      ...(oldField?.origin ? { origin: oldField?.origin } : {}),\n      ...(oldField?.variable ? { variable: oldField?.variable } : {}),\n    };\n\n    section.fields.push({\n      data,\n      icon: null,\n      id: generateWidgetItemId(),\n      label: oldField?.name,\n      label_selected: oldField?.label_yes || \"\",\n      label_type: \"text\",\n      label_unselected: oldField?.label_no || \"\",\n      send_data: true,\n      show_new_line: oldField?.new_line !== undefined ? oldField?.new_line : true,\n      type: oldField?.type === \"switch\" ? EInputControlFieldType.Switch : EInputControlFieldType.Text,\n    });\n  }\n\n  newStructure.display.sections.push(section);\n  if (Array.isArray(oldWidget.data)) {\n    newStructure.data = oldWidget.data;\n  }\n\n  return newStructure;\n}\n\nexport function isOldStructure(widget: any) {\n  const isOld = !!(widget?.display?.watermark !== undefined || widget?.display?.input_type);\n\n  return isOld;\n}\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}