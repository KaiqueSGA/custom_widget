{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isOldStructure = exports.convert = void 0;\nvar common_1 = require(\"./common\");\nfunction convert(oldWidget) {\n  var oldDisplay = oldWidget.display || {};\n  var newStructure = {\n    dashboard: oldWidget.dashboard,\n    data: [],\n    display: {\n      header_buttons: oldDisplay.header_buttons || [],\n      help: oldDisplay.help || \"\",\n      image_type: oldDisplay !== null && oldDisplay !== void 0 && oldDisplay.icon_color ? \"icon\" : \"image\",\n      image_url: (oldDisplay === null || oldDisplay === void 0 ? void 0 : oldDisplay.icon_url) || \"\",\n      occupy_whole_widget: oldDisplay === null || oldDisplay === void 0 ? void 0 : oldDisplay.fit_image,\n      opacity: oldDisplay === null || oldDisplay === void 0 ? void 0 : oldDisplay.opacity,\n      theme: {\n        color: {\n          background: (oldDisplay === null || oldDisplay === void 0 ? void 0 : oldDisplay.background_color) || null,\n          header: null,\n          hover: null,\n          icon: (oldDisplay === null || oldDisplay === void 0 ? void 0 : oldDisplay.icon_color) || null,\n          title: (oldDisplay === null || oldDisplay === void 0 ? void 0 : oldDisplay.label_color) || null\n        }\n      },\n      title: (oldDisplay === null || oldDisplay === void 0 ? void 0 : oldDisplay.label_button) || \"\",\n      url: (0, common_1.removeHttpFromURL)(oldDisplay === null || oldDisplay === void 0 ? void 0 : oldDisplay.link) || \"\"\n    },\n    id: oldWidget.id,\n    label: oldWidget.label,\n    realtime: null,\n    type: \"tile\"\n  };\n  return newStructure;\n}\nexports.convert = convert;\nfunction isOldStructure(widget) {\n  var _widget$display, _widget$display2, _widget$display3, _widget$display4, _widget$display5;\n  var isOld = !!(widget !== null && widget !== void 0 && (_widget$display = widget.display) !== null && _widget$display !== void 0 && _widget$display.background_color || widget !== null && widget !== void 0 && (_widget$display2 = widget.display) !== null && _widget$display2 !== void 0 && _widget$display2.fit_image || widget !== null && widget !== void 0 && (_widget$display3 = widget.display) !== null && _widget$display3 !== void 0 && _widget$display3.label_color || widget !== null && widget !== void 0 && (_widget$display4 = widget.display) !== null && _widget$display4 !== void 0 && _widget$display4.label_button || widget !== null && widget !== void 0 && (_widget$display5 = widget.display) !== null && _widget$display5 !== void 0 && _widget$display5.link);\n  return isOld;\n}\nexports.isOldStructure = isOldStructure;","map":{"version":3,"mappings":";;;;;;AAKA;AAEA,SAAgBA,OAAO,CAACC,SAAc;EACpC,IAAMC,UAAU,GAAGD,SAAS,CAACE,OAAO,IAAI,EAAE;EAE1C,IAAMC,YAAY,GAAQ;IACxBC,SAAS,EAAEJ,SAAS,CAACI,SAAS;IAC9BC,IAAI,EAAE,EAAE;IACRH,OAAO,EAAE;MACPI,cAAc,EAAEL,UAAU,CAACK,cAAc,IAAI,EAAE;MAC/CC,IAAI,EAAEN,UAAU,CAACM,IAAI,IAAI,EAAE;MAC3BC,UAAU,EAAEP,UAAU,aAAVA,UAAU,eAAVA,UAAU,CAAEQ,UAAU,GAAG,MAAM,GAAG,OAAO;MACrDC,SAAS,EAAE,WAAU,aAAVT,UAAU,uBAAVA,UAAU,CAAEU,QAAQ,KAAI,EAAE;MACrCC,mBAAmB,EAAEX,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEY,SAAS;MAC1CC,OAAO,EAAEb,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEa,OAAO;MAC5BC,KAAK,EAAE;QACLC,KAAK,EAAE;UACLC,UAAU,EAAE,WAAU,aAAVhB,UAAU,uBAAVA,UAAU,CAAEiB,gBAAgB,KAAI,IAAI;UAChDC,MAAM,EAAE,IAAI;UACZC,KAAK,EAAE,IAAI;UACXC,IAAI,EAAE,WAAU,aAAVpB,UAAU,uBAAVA,UAAU,CAAEQ,UAAU,KAAI,IAAI;UACpCa,KAAK,EAAE,WAAU,aAAVrB,UAAU,uBAAVA,UAAU,CAAEsB,WAAW,KAAI;;OAErC;MACDD,KAAK,EAAE,WAAU,aAAVrB,UAAU,uBAAVA,UAAU,CAAEuB,YAAY,KAAI,EAAE;MACrCC,GAAG,EAAE,8BAAiB,EAACxB,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEyB,IAAI,CAAC,IAAI;KAC7C;IACDC,EAAE,EAAE3B,SAAS,CAAC2B,EAAE;IAChBC,KAAK,EAAE5B,SAAS,CAAC4B,KAAK;IACtBC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAE;GACP;EAED,OAAO3B,YAAY;AACrB;AAhCA4B;AAkCA,SAAgBC,cAAc,CAACC,MAAW;EAAA;EACxC,IAAMC,KAAK,GAAG,CAAC,EACbD,MAAM,aAANA,MAAM,kCAANA,MAAM,CAAE/B,OAAO,4CAAf,gBAAiBgB,gBAAgB,IACjCe,MAAM,aAANA,MAAM,mCAANA,MAAM,CAAE/B,OAAO,6CAAf,iBAAiBW,SAAS,IAC1BoB,MAAM,aAANA,MAAM,mCAANA,MAAM,CAAE/B,OAAO,6CAAf,iBAAiBqB,WAAW,IAC5BU,MAAM,aAANA,MAAM,mCAANA,MAAM,CAAE/B,OAAO,6CAAf,iBAAiBsB,YAAY,IAC7BS,MAAM,aAANA,MAAM,mCAANA,MAAM,CAAE/B,OAAO,6CAAf,iBAAiBwB,IAAI,CACtB;EAED,OAAOQ,KAAK;AACd;AAVAH","names":["convert","oldWidget","oldDisplay","display","newStructure","dashboard","data","header_buttons","help","image_type","icon_color","image_url","icon_url","occupy_whole_widget","fit_image","opacity","theme","color","background","background_color","header","hover","icon","title","label_color","label_button","url","link","id","label","realtime","type","exports","isOldStructure","widget","isOld"],"sources":["C:\\Users\\kaique\\Documents\\SGA\\widget\\project\\node_modules\\@tago-io\\sdk\\src\\modules\\Migration\\tile.ts"],"sourcesContent":["// ? ==================================== (c) TagoIO ====================================\r\n// * What is this file?\r\n//     Migration of old TILE to new TILE\r\n// ? ====================================================================================\r\nimport { WidgetInfo } from \"../Account/dashboards.types\";\r\nimport { removeHttpFromURL } from \"./common\";\r\n\r\nexport function convert(oldWidget: any): WidgetInfo {\r\n  const oldDisplay = oldWidget.display || {};\r\n\r\n  const newStructure: any = {\r\n    dashboard: oldWidget.dashboard,\r\n    data: [],\r\n    display: {\r\n      header_buttons: oldDisplay.header_buttons || [],\r\n      help: oldDisplay.help || \"\",\r\n      image_type: oldDisplay?.icon_color ? \"icon\" : \"image\",\r\n      image_url: oldDisplay?.icon_url || \"\",\r\n      occupy_whole_widget: oldDisplay?.fit_image,\r\n      opacity: oldDisplay?.opacity,\r\n      theme: {\r\n        color: {\r\n          background: oldDisplay?.background_color || null,\r\n          header: null,\r\n          hover: null,\r\n          icon: oldDisplay?.icon_color || null,\r\n          title: oldDisplay?.label_color || null,\r\n        },\r\n      },\r\n      title: oldDisplay?.label_button || \"\",\r\n      url: removeHttpFromURL(oldDisplay?.link) || \"\",\r\n    },\r\n    id: oldWidget.id,\r\n    label: oldWidget.label,\r\n    realtime: null,\r\n    type: \"tile\",\r\n  };\r\n\r\n  return newStructure;\r\n}\r\n\r\nexport function isOldStructure(widget: any) {\r\n  const isOld = !!(\r\n    widget?.display?.background_color ||\r\n    widget?.display?.fit_image ||\r\n    widget?.display?.label_color ||\r\n    widget?.display?.label_button ||\r\n    widget?.display?.link\r\n  );\r\n\r\n  return isOld;\r\n}\r\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}