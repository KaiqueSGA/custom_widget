{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yudji\\\\OneDrive\\\\Documentos\\\\SGA\\\\WIDGETS\\\\custom_widgets\\\\project\\\\src\\\\widgets\\\\device_variables\\\\device_variables.js\",\n  _s = $RefreshSig$();\nimport './device_variables.css';\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  tago_device\n} = require('../../classes/device/device.js');\nconst {\n  location_apis\n} = require('../../classes/location/location.js');\nfunction Device_variables() {\n  _s();\n  const [account_devices, set_account_devices] = useState([]);\n  const [device_variables, set_device_variables] = useState([]);\n  const device_methods = new tago_device();\n  const location_funcs = new location_apis();\n  window.TagoIO.onStart(widget => {\n    window.widget = widget;\n  });\n  window.TagoIO.ready();\n  useEffect(() => {\n    device_methods.list().then(resp => set_account_devices(resp)).catch(err => console.log(err));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"div-mother\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"div-filho\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-div-mother\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"HELLO MY FRIEND!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Choose the device that you wish see the variables:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"devices\",\n            className: \"devices\",\n            children: account_devices.map(item => {\n              try {\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: `${item.id},${item.name}`,\n                  children: [\" \", item.name, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 49,\n                  columnNumber: 34\n                }, this);\n              } catch (err) {\n                console.log(err);\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: async () => {\n              let request = await device_methods.get_device_variables();\n              set_device_variables(request.filter(obj => obj.variable === \"esn\"));\n            },\n            children: \" Show variables\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"data_variables\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            border: \"1\",\n            className: \"variable_tables\",\n            children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"Origin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"Coordinates\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 29\n            }, this), device_variables.map(data => {\n              setTimeout(() => {\n                // This delay is necessary because firt i need to create an element with the corresponding tag and after i catch the element through of id \n                const element_id = data.id;\n                const scope = data;\n                console.log();\n                document.getElementById(data.id).addEventListener('change', async function () {\n                  if (this.value === \"MAC\") {\n                    let element_to_insert_the_new_value = document.getElementsByClassName(element_id)[0];\n                    let mac_coordinates = await location_funcs.get_coordinates_through_mac_datas([\"mac0\", \"mac1\", \"mac2\"], scope);\n                    element_to_insert_the_new_value.innerText = `${mac_coordinates.lat},${mac_coordinates.lng}`;\n                  } else if (this.value === \"LBS\") {\n                    let element_to_insert_the_new_value = document.getElementsByClassName(element_id)[0];\n                    let lbs_coordinates = await location_funcs.get_coordinates_through_lbs_datas([\"lbs0\", \"lbs1\", \"lbs2\"], scope, scope.metadata.lbs_mode === \"LTE\" ? \"lte\" : \"gsm\");\n                    element_to_insert_the_new_value.innerText = `${lbs_coordinates.lat},${lbs_coordinates.lng}`;\n                  } else {\n                    let element_to_insert_the_new_value = document.getElementsByClassName(element_id)[0];\n                  }\n                });\n              }, 10);\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"data_variable\",\n                  children: data.metadata.address\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"data_variable\",\n                  children: data.metadata.origin\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"b\",\n                  children: /*#__PURE__*/_jsxDEV(\"select\", {\n                    id: data.id,\n                    className: \"coordinate-types\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      children: \"Select the data type that you want to see...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 109,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"LBS\",\n                      children: \"LBS coordinates\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 110,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"MAC\",\n                      children: \"MAC coordinates\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 111,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"GPS\",\n                      children: \"GPS coordinates\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 112,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 108,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: data.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 38\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 33\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_s(Device_variables, \"DuA4cg4mHe8v3UjVvjyAZ2xOQNI=\");\n_c = Device_variables;\nexport { Device_variables };\nvar _c;\n$RefreshReg$(_c, \"Device_variables\");","map":{"version":3,"names":["React","useEffect","useState","tago_device","require","location_apis","Device_variables","account_devices","set_account_devices","device_variables","set_device_variables","device_methods","location_funcs","window","TagoIO","onStart","widget","ready","list","then","resp","catch","err","console","log","map","item","id","name","request","get_device_variables","filter","obj","variable","data","setTimeout","element_id","scope","document","getElementById","addEventListener","value","element_to_insert_the_new_value","getElementsByClassName","mac_coordinates","get_coordinates_through_mac_datas","innerText","lat","lng","lbs_coordinates","get_coordinates_through_lbs_datas","metadata","lbs_mode","address","origin"],"sources":["C:/Users/yudji/OneDrive/Documentos/SGA/WIDGETS/custom_widgets/project/src/widgets/device_variables/device_variables.js"],"sourcesContent":["import './device_variables.css';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nconst { tago_device } = require('../../classes/device/device.js');\r\nconst { location_apis } = require('../../classes/location/location.js')\r\n\r\n\r\nfunction Device_variables(){\r\n  const [account_devices, set_account_devices] = useState([]);\r\n  const [device_variables, set_device_variables] = useState([]);\r\n\r\n  const device_methods = new tago_device();\r\n  const location_funcs = new location_apis();\r\n\r\n    window.TagoIO.onStart((widget) => {\r\n        window.widget = widget;\r\n    })\r\n    window.TagoIO.ready();\r\n\r\n\r\n\r\n\r\n\r\n    useEffect( () => {\r\n        device_methods.list()\r\n           .then((resp) => set_account_devices(resp))\r\n           .catch((err) => console.log(err))\r\n    },[])\r\n\r\n    \r\n    \r\n\r\n    return(\r\n        <>\r\n\r\n        <div className='div-mother'>\r\n        <div className='div-filho'>\r\n\r\n        <div className='text-div-mother'>\r\n         <h1>HELLO MY FRIEND!</h1>\r\n         <br/>\r\n         <h3>Choose the device that you wish see the variables:</h3>\r\n         </div>\r\n         <div className=\"input\">\r\n                    <select id=\"devices\" className =\"devices\">\r\n                        {account_devices.map((item) =>{\r\n                          try{\r\n                             return(\r\n                                 <option value={`${item.id},${item.name}`}> {item.name} </option>\r\n                             )\r\n                            }catch(err){\r\n                              console.log(err)\r\n                            }\r\n                                      \r\n                        })}\r\n                    </select>\r\n\r\n                    <button onClick={async() =>  { let request = await device_methods.get_device_variables(); set_device_variables(request.filter(obj => obj.variable === \"esn\")); }}> Show variables</button>\r\n                </div> \r\n\r\n\r\n\r\n                <div className='data_variables'>\r\n\r\n                    \r\n                            \r\n\r\n                        <table border=\"1\" className='variable_tables'>\r\n                            <tr>\r\n                                <td>Address</td>\r\n                                <td>Origin</td>\r\n                                <td>Coordinates</td>\r\n                                  \r\n                            </tr>\r\n                            {device_variables.map(data => {\r\n\r\n                                setTimeout(() => {// This delay is necessary because firt i need to create an element with the corresponding tag and after i catch the element through of id \r\n                                    const element_id = data.id;\r\n                                    const scope = data; console.log()\r\n\r\n                                    document.getElementById(data.id).addEventListener('change', async function(){\r\n                                      \r\n                                        if(this.value === \"MAC\"){ \r\n                                          let element_to_insert_the_new_value = document.getElementsByClassName(element_id)[0];\r\n                                          let mac_coordinates = await location_funcs.get_coordinates_through_mac_datas([\"mac0\", \"mac1\", \"mac2\"],scope); \r\n                                          element_to_insert_the_new_value.innerText = `${mac_coordinates.lat},${mac_coordinates.lng}`;\r\n                                        }\r\n                                        else if(this.value === \"LBS\"){\r\n                                          let element_to_insert_the_new_value = document.getElementsByClassName(element_id)[0];\r\n                                          let lbs_coordinates = await location_funcs.get_coordinates_through_lbs_datas([\"lbs0\", \"lbs1\", \"lbs2\"],scope, scope.metadata.lbs_mode === \"LTE\" ?\"lte\" :\"gsm\" ); \r\n                                          element_to_insert_the_new_value.innerText = `${lbs_coordinates.lat},${lbs_coordinates.lng}`; \r\n                                        }\r\n                                        else{ \r\n                                        let element_to_insert_the_new_value = document.getElementsByClassName(element_id)[0];\r\n                                        \r\n                                        }\r\n\r\n                                    })\r\n\r\n                                },10);\r\n                            \r\n                              return( \r\n                                <tr>\r\n                                    <td className='data_variable'>{data.metadata.address}</td>\r\n                                    <td className='data_variable'>{data.metadata.origin}</td>\r\n\r\n                                    <td className='b'>\r\n                                        <select id={data.id} className =\"coordinate-types\">\r\n                                            <option>Select the data type that you want to see...</option>\r\n                                            <option value=\"LBS\" >LBS coordinates</option>\r\n                                            <option value=\"MAC\" >MAC coordinates</option>\r\n                                            <option value=\"GPS\" >GPS coordinates</option>\r\n                                        </select>\r\n\r\n                                     \r\n                                     </td>\r\n                                     <td className={data.id}></td>\r\n\r\n                                </tr>\r\n                              )\r\n\r\n                               \r\n  \r\n\r\n\r\n                            })}\r\n\r\n                        </table>\r\n                        \r\n                            \r\n                    \r\n                </div>\r\n\r\n\r\n\r\n\r\n                </div> \r\n\r\n\r\n           \r\n\r\n            </div>         \r\n         \r\n        </>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport { Device_variables };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}