{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/yudji/OneDrive/Documentos/SGA/WIDGETS/custom_widgets/project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/yudji/OneDrive/Documentos/SGA/WIDGETS/custom_widgets/project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/yudji/OneDrive/Documentos/SGA/WIDGETS/custom_widgets/project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./device_variables.css';import React,{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var _require=require('../../classes/device/device.js'),tago_device=_require.tago_device;var _require2=require('../../classes/location/location.js'),location_apis=_require2.location_apis;function Device_variables(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),device_variables=_useState2[0],set_device_variables=_useState2[1];var device_methods=new tago_device();var location_funcs=new location_apis();useEffect(function(){console.log(\"oiii\");window.TagoIO.onStart(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(widget){var device_id,request;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:window.widget=widget;device_id=widget.display.variables[0].origin.id;_context.next=4;return device_methods.get_device_variables(device_id);case 4:request=_context.sent;console.log(request);set_device_variables(request.filter(function(data){return data.metadata.media===\"STX\";}));case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());window.TagoIO.ready();},[]);var cacthESN=function cacthESN(data){var help=data.indexOf(\"<unixTime>\");var firstTag=data.indexOf(\">\",help);var secondTag=data.indexOf(\"</unixTime>\",firstTag);return data.substring(firstTag+1,secondTag);};function add_0_to_left(value){if(String(value).length===1){return\"0\"+value;}else{return value;}}var convert_hours_in_seconds=function convert_hours_in_seconds(hour,minute,second){var hours_in_seconds=hour*3600;var minutes_in_seconds=minute*60;var total_value=hours_in_seconds+minutes_in_seconds+second;console.log(total_value);return total_value;};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"div-mother\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"div-filho\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-div-mother\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"See all variables that the selected device sent!\"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"data_variables\",children:/*#__PURE__*/_jsxs(\"table\",{border:\"1\",className:\"variable_tables\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"TimeStamp Value\"}),/*#__PURE__*/_jsx(\"td\",{children:\"UnixTime Value\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Difference between Dates\"})]}),device_variables.map(function(data){var unixTime=new Date(Number(cacthESN(data.metadata.xml))*1000);console.log(unixTime.getSeconds()-data.time.getSeconds());console.log();console.log(\" \");return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(add_0_to_left(data.time.getMonth()+1),\"/\").concat(add_0_to_left(data.time.getDate()),\"/\").concat(add_0_to_left(data.time.getFullYear()),\" \").concat(add_0_to_left(data.time.getHours()),\":\").concat(add_0_to_left(data.time.getMinutes()),\":\").concat(add_0_to_left(data.time.getSeconds()))}),/*#__PURE__*/_jsx(\"td\",{className:\"data_variable\",children:\"\".concat(add_0_to_left(unixTime.getMonth()+1),\"/\").concat(add_0_to_left(unixTime.getDate()),\"/\").concat(add_0_to_left(unixTime.getFullYear()),\" \").concat(add_0_to_left(unixTime.getHours()),\":\").concat(add_0_to_left(unixTime.getMinutes()),\":\").concat(add_0_to_left(unixTime.getSeconds()))}),/*#__PURE__*/_jsx(\"td\",{className:\"b\",children:\"The datas has an difference of: \".concat(Math.abs(convert_hours_in_seconds(data.time.getHours(),data.time.getMinutes(),data.time.getSeconds())-convert_hours_in_seconds(unixTime.getHours(),unixTime.getMinutes(),unixTime.getSeconds())),\"(values in seconds)\")}),/*#__PURE__*/_jsx(\"td\",{className:data.id}),/*#__PURE__*/_jsx(\"td\",{className:data.id})]});})]})})]})})});}export{Device_variables};","map":{"version":3,"names":["React","useEffect","useState","require","tago_device","location_apis","Device_variables","device_variables","set_device_variables","device_methods","location_funcs","console","log","window","TagoIO","onStart","widget","device_id","display","variables","origin","id","get_device_variables","request","filter","data","metadata","media","ready","cacthESN","help","indexOf","firstTag","secondTag","substring","add_0_to_left","value","String","length","convert_hours_in_seconds","hour","minute","second","hours_in_seconds","minutes_in_seconds","total_value","map","unixTime","Date","Number","xml","getSeconds","time","getMonth","getDate","getFullYear","getHours","getMinutes","Math","abs"],"sources":["C:/Users/yudji/OneDrive/Documentos/SGA/WIDGETS/custom_widgets/project/src/widgets/device_variables/device_variables.js"],"sourcesContent":["import './device_variables.css';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\n\r\nconst { tago_device } = require('../../classes/device/device.js');\r\nconst { location_apis } = require('../../classes/location/location.js')\r\n\r\n\r\nfunction Device_variables(){\r\n  const [device_variables, set_device_variables] = useState( [] );\r\n\r\n  const device_methods = new tago_device();\r\n  const location_funcs = new location_apis();\r\n\r\n\r\n   useEffect(() => {console.log(\"oiii\")\r\n    window.TagoIO.onStart( async(widget) => {\r\n      window.widget = widget;\r\n\r\n      let device_id = widget.display.variables[0].origin.id;\r\n      let request = await device_methods.get_device_variables(device_id); console.log(request)\r\n      set_device_variables(request.filter(data => data.metadata.media === \"STX\")); \r\n  })\r\n  window.TagoIO.ready(); \r\n  },[]) \r\n\r\n\r\n\r\n\r\n    const cacthESN = (data) =>{\r\n      let help = data.indexOf(\"<unixTime>\");\r\n      let firstTag = data.indexOf(\">\",help);\r\n      let secondTag = data.indexOf(\"</unixTime>\",firstTag);\r\n    \r\n      return data.substring(firstTag + 1,secondTag)\r\n    }\r\n  \r\n\r\n\r\n    \r\n   \r\n\r\n\r\n   function add_0_to_left(value){\r\n\r\n      if( String(value).length === 1 ){\r\n        return \"0\" + value;\r\n      }else{\r\n        return value;\r\n      }\r\n\r\n   }\r\n\r\n\r\n   const convert_hours_in_seconds = (hour,minute,second) => {\r\n    let hours_in_seconds = hour * 3600;\r\n    let minutes_in_seconds = minute * 60;\r\n\r\n\r\n    let total_value = hours_in_seconds + minutes_in_seconds + second;console.log(total_value)\r\n    return total_value;\r\n   }\r\n\r\n\r\n\r\n    return(\r\n        <>\r\n\r\n        <div className='div-mother'>\r\n        <div className='div-filho'>\r\n\r\n      <div className='text-div-mother'>\r\n         <h1>See all variables that the selected device sent!</h1>\r\n         <br/>\r\n        </div>\r\n       \r\n                <div className='data_variables'>\r\n\r\n                        <table border=\"1\" className='variable_tables'>\r\n                            <tr>\r\n                                <td>TimeStamp Value</td>\r\n                                <td>UnixTime Value</td>\r\n                                <td>Difference between Dates</td>\r\n                                  \r\n                            </tr>\r\n                            {device_variables.map(data => { \r\n\r\n                            \r\n                            let unixTime = new Date( (Number( cacthESN(data.metadata.xml) )) * 1000); \r\n\r\n                            console.log(unixTime.getSeconds() - data.time.getSeconds());\r\n                            console.log();\r\n                            console.log(\" \");\r\n                              return( \r\n                                <tr>\r\n\r\n                                      <td>{`${ add_0_to_left((data.time.getMonth()) + 1)  }/${ add_0_to_left(data.time.getDate()) }/${ add_0_to_left(data.time.getFullYear()) } ${ add_0_to_left(data.time.getHours()) }:${ add_0_to_left(data.time.getMinutes()) }:${ add_0_to_left(data.time.getSeconds()) }`}</td>   \r\n\r\n                                      <td className='data_variable'>{`${ add_0_to_left((unixTime.getMonth()) + 1)  }/${ add_0_to_left(unixTime.getDate()) }/${ add_0_to_left(unixTime.getFullYear()) } ${ add_0_to_left(unixTime.getHours()) }:${ add_0_to_left(unixTime.getMinutes()) }:${ add_0_to_left(unixTime.getSeconds()) }`}</td> \r\n\r\n                                      <td className='b'>{ `The datas has an difference of: ${  Math.abs(convert_hours_in_seconds( data.time.getHours(), data.time.getMinutes(), data.time.getSeconds() )   -   convert_hours_in_seconds(unixTime.getHours(), unixTime.getMinutes(), unixTime.getSeconds() ) ) }(values in seconds)` }</td>\r\n\r\n                                     <td className={data.id}></td>\r\n                                     <td className={data.id}></td>\r\n\r\n                                </tr>\r\n                              )\r\n\r\n                               \r\n  \r\n\r\n\r\n                            })}\r\n\r\n                        </table>\r\n                        \r\n                            \r\n                    \r\n                </div>\r\n\r\n\r\n\r\n\r\n                </div> \r\n\r\n\r\n           \r\n\r\n            </div>         \r\n         \r\n        </>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport { Device_variables };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}