{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isOldStructure = exports.convert = void 0;\nconst common_1 = require(\"./common\");\nfunction convert(oldWidget) {\n  const oldDisplay = oldWidget.display || {};\n  const newStructure = {\n    dashboard: oldWidget.dashboard,\n    data: [],\n    display: {\n      header_buttons: oldDisplay.header_buttons || [],\n      help: oldDisplay.help || \"\",\n      image_type: oldDisplay?.icon_color ? \"icon\" : \"image\",\n      image_url: oldDisplay?.icon_url || \"\",\n      occupy_whole_widget: oldDisplay?.fit_image,\n      opacity: oldDisplay?.opacity,\n      theme: {\n        color: {\n          background: oldDisplay?.background_color || null,\n          header: null,\n          hover: null,\n          icon: oldDisplay?.icon_color || null,\n          title: oldDisplay?.label_color || null\n        }\n      },\n      title: oldDisplay?.label_button || \"\",\n      url: (0, common_1.removeHttpFromURL)(oldDisplay?.link) || \"\"\n    },\n    id: oldWidget.id,\n    label: oldWidget.label,\n    realtime: null,\n    type: \"tile\"\n  };\n  return newStructure;\n}\nexports.convert = convert;\nfunction isOldStructure(widget) {\n  const isOld = !!(widget?.display?.background_color || widget?.display?.fit_image || widget?.display?.label_color || widget?.display?.label_button || widget?.display?.link);\n  return isOld;\n}\nexports.isOldStructure = isOldStructure;","map":{"version":3,"mappings":";;;;;;AAKA;AAEA,SAAgBA,OAAO,CAACC,SAAc;EACpC,MAAMC,UAAU,GAAGD,SAAS,CAACE,OAAO,IAAI,EAAE;EAE1C,MAAMC,YAAY,GAAQ;IACxBC,SAAS,EAAEJ,SAAS,CAACI,SAAS;IAC9BC,IAAI,EAAE,EAAE;IACRH,OAAO,EAAE;MACPI,cAAc,EAAEL,UAAU,CAACK,cAAc,IAAI,EAAE;MAC/CC,IAAI,EAAEN,UAAU,CAACM,IAAI,IAAI,EAAE;MAC3BC,UAAU,EAAEP,UAAU,EAAEQ,UAAU,GAAG,MAAM,GAAG,OAAO;MACrDC,SAAS,EAAET,UAAU,EAAEU,QAAQ,IAAI,EAAE;MACrCC,mBAAmB,EAAEX,UAAU,EAAEY,SAAS;MAC1CC,OAAO,EAAEb,UAAU,EAAEa,OAAO;MAC5BC,KAAK,EAAE;QACLC,KAAK,EAAE;UACLC,UAAU,EAAEhB,UAAU,EAAEiB,gBAAgB,IAAI,IAAI;UAChDC,MAAM,EAAE,IAAI;UACZC,KAAK,EAAE,IAAI;UACXC,IAAI,EAAEpB,UAAU,EAAEQ,UAAU,IAAI,IAAI;UACpCa,KAAK,EAAErB,UAAU,EAAEsB,WAAW,IAAI;;OAErC;MACDD,KAAK,EAAErB,UAAU,EAAEuB,YAAY,IAAI,EAAE;MACrCC,GAAG,EAAE,8BAAiB,EAACxB,UAAU,EAAEyB,IAAI,CAAC,IAAI;KAC7C;IACDC,EAAE,EAAE3B,SAAS,CAAC2B,EAAE;IAChBC,KAAK,EAAE5B,SAAS,CAAC4B,KAAK;IACtBC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAE;GACP;EAED,OAAO3B,YAAY;AACrB;AAhCA4B;AAkCA,SAAgBC,cAAc,CAACC,MAAW;EACxC,MAAMC,KAAK,GAAG,CAAC,EACbD,MAAM,EAAE/B,OAAO,EAAEgB,gBAAgB,IACjCe,MAAM,EAAE/B,OAAO,EAAEW,SAAS,IAC1BoB,MAAM,EAAE/B,OAAO,EAAEqB,WAAW,IAC5BU,MAAM,EAAE/B,OAAO,EAAEsB,YAAY,IAC7BS,MAAM,EAAE/B,OAAO,EAAEwB,IAAI,CACtB;EAED,OAAOQ,KAAK;AACd;AAVAH","names":["convert","oldWidget","oldDisplay","display","newStructure","dashboard","data","header_buttons","help","image_type","icon_color","image_url","icon_url","occupy_whole_widget","fit_image","opacity","theme","color","background","background_color","header","hover","icon","title","label_color","label_button","url","link","id","label","realtime","type","exports","isOldStructure","widget","isOld"],"sources":["C:\\Users\\yudji\\OneDrive\\Documentos\\SGA\\WIDGETS\\mqtt_wid\\dash_mqtt\\node_modules\\@tago-io\\sdk\\src\\modules\\Migration\\tile.ts"],"sourcesContent":["// ? ==================================== (c) TagoIO ====================================\n// * What is this file?\n//     Migration of old TILE to new TILE\n// ? ====================================================================================\nimport { WidgetInfo } from \"../Account/dashboards.types\";\nimport { removeHttpFromURL } from \"./common\";\n\nexport function convert(oldWidget: any): WidgetInfo {\n  const oldDisplay = oldWidget.display || {};\n\n  const newStructure: any = {\n    dashboard: oldWidget.dashboard,\n    data: [],\n    display: {\n      header_buttons: oldDisplay.header_buttons || [],\n      help: oldDisplay.help || \"\",\n      image_type: oldDisplay?.icon_color ? \"icon\" : \"image\",\n      image_url: oldDisplay?.icon_url || \"\",\n      occupy_whole_widget: oldDisplay?.fit_image,\n      opacity: oldDisplay?.opacity,\n      theme: {\n        color: {\n          background: oldDisplay?.background_color || null,\n          header: null,\n          hover: null,\n          icon: oldDisplay?.icon_color || null,\n          title: oldDisplay?.label_color || null,\n        },\n      },\n      title: oldDisplay?.label_button || \"\",\n      url: removeHttpFromURL(oldDisplay?.link) || \"\",\n    },\n    id: oldWidget.id,\n    label: oldWidget.label,\n    realtime: null,\n    type: \"tile\",\n  };\n\n  return newStructure;\n}\n\nexport function isOldStructure(widget: any) {\n  const isOld = !!(\n    widget?.display?.background_color ||\n    widget?.display?.fit_image ||\n    widget?.display?.label_color ||\n    widget?.display?.label_button ||\n    widget?.display?.link\n  );\n\n  return isOld;\n}\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}